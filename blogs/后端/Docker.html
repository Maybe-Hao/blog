<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker | 心上青梅</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/favicon.ico">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/144.png">
    <link rel="mask-icon" href="/icons/144.png" color="#3eaf7c">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta name="keywords" content="可可爱爱没有脑袋">
    <meta name="author" content="小浩浩爱洗澡">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.4d66383b.css" as="style"><link rel="preload" href="/assets/js/app.cb73b030.js" as="script"><link rel="preload" href="/assets/js/3.23e2a2eb.js" as="script"><link rel="preload" href="/assets/js/1.76ab856a.js" as="script"><link rel="preload" href="/assets/js/17.eb1b2c45.js" as="script"><link rel="preload" href="/assets/js/9.1dc60e99.js" as="script"><link rel="prefetch" href="/assets/js/10.a59aceee.js"><link rel="prefetch" href="/assets/js/11.5f679650.js"><link rel="prefetch" href="/assets/js/12.0f3aca3d.js"><link rel="prefetch" href="/assets/js/13.66e380be.js"><link rel="prefetch" href="/assets/js/14.e0441d7c.js"><link rel="prefetch" href="/assets/js/15.1bc90b53.js"><link rel="prefetch" href="/assets/js/16.30f3c90d.js"><link rel="prefetch" href="/assets/js/18.85adc315.js"><link rel="prefetch" href="/assets/js/19.fdbc57b6.js"><link rel="prefetch" href="/assets/js/20.4ac9d1aa.js"><link rel="prefetch" href="/assets/js/21.ba7f2edf.js"><link rel="prefetch" href="/assets/js/22.66aed9c4.js"><link rel="prefetch" href="/assets/js/23.3f75838c.js"><link rel="prefetch" href="/assets/js/24.fea3c726.js"><link rel="prefetch" href="/assets/js/25.d58128a5.js"><link rel="prefetch" href="/assets/js/26.5143b6b4.js"><link rel="prefetch" href="/assets/js/27.3ce6f325.js"><link rel="prefetch" href="/assets/js/28.4bb08ea6.js"><link rel="prefetch" href="/assets/js/29.65ec9142.js"><link rel="prefetch" href="/assets/js/30.01047f7b.js"><link rel="prefetch" href="/assets/js/31.224a3733.js"><link rel="prefetch" href="/assets/js/4.e34b117c.js"><link rel="prefetch" href="/assets/js/5.fa636491.js"><link rel="prefetch" href="/assets/js/6.520cdb7b.js"><link rel="prefetch" href="/assets/js/7.24709d67.js"><link rel="prefetch" href="/assets/js/8.c5e1d8b7.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4d66383b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-130b300a><div data-v-130b300a><div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-130b300a data-v-130b300a><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>心上青梅</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2></p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>木子水告</span>
            
          <span data-v-25ba6db2>2020 - </span>
          2022
        </a></span></div></div> <div class="hide" data-v-130b300a><header class="navbar" data-v-130b300a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/酥皮.jpg" alt="心上青梅" class="logo"> <span class="site-name">心上青梅</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/前端/" class="nav-link"><i class="undefined"></i>
  前端
</a></li><li class="dropdown-item"><!----> <a href="/categories/后端/" class="nav-link"><i class="undefined"></i>
  后端
</a></li><li class="dropdown-item"><!----> <a href="/categories/安装/" class="nav-link"><i class="undefined"></i>
  安装
</a></li><li class="dropdown-item"><!----> <a href="/categories/算法/" class="nav-link"><i class="undefined"></i>
  算法
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Docs
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/theme-reco/" class="nav-link"><i class="undefined"></i>
  vuepress-reco
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/recoluan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-130b300a></div> <aside class="sidebar" data-v-130b300a><div class="personal-info-wrapper" data-v-39576ba9 data-v-130b300a><img src="/assets/avatar/酥皮.jpg" alt="author-avatar" class="personal-img" data-v-39576ba9> <h3 class="name" data-v-39576ba9>
    木子水告
  </h3> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>19</h3> <h6 data-v-39576ba9>Articles</h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>15</h3> <h6 data-v-39576ba9>Tags</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/前端/" class="nav-link"><i class="undefined"></i>
  前端
</a></li><li class="dropdown-item"><!----> <a href="/categories/后端/" class="nav-link"><i class="undefined"></i>
  后端
</a></li><li class="dropdown-item"><!----> <a href="/categories/安装/" class="nav-link"><i class="undefined"></i>
  安装
</a></li><li class="dropdown-item"><!----> <a href="/categories/算法/" class="nav-link"><i class="undefined"></i>
  算法
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Docs
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/theme-reco/" class="nav-link"><i class="undefined"></i>
  vuepress-reco
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/recoluan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><a href="/blogs/后端/知识点.html" class="sidebar-link">后端发展知识点</a></li><li><a href="/blogs/后端/Redis.html" class="sidebar-link">Redis</a></li><li><a href="/blogs/后端/Spring.html" class="sidebar-link">Spring</a></li><li><a href="/blogs/后端/SpringBoot.html" class="sidebar-link">SpringBoot</a></li><li><a href="/blogs/后端/SpringMVC.html" class="sidebar-link">SpringMVC</a></li><li><a href="/blogs/后端/Docker.html" class="active sidebar-link">Docker</a></li><li><a href="/blogs/后端/Java基础知识.html" class="sidebar-link">Java基础知识</a></li><li><a href="/blogs/后端/Swagger.html" class="sidebar-link">Swagger</a></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-130b300a><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>Docker</h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>木子水告</span>
            
          <span data-v-25ba6db2>2020 - </span>
          2022
        </a></span></div></div> <div data-v-130b300a><main class="page"><section><div class="page-title"><h1 class="title">Docker</h1> <div data-v-f875f3fc><i class="iconfont reco-account" data-v-f875f3fc><span data-v-f875f3fc>木子水告</span></i> <i class="iconfont reco-date" data-v-f875f3fc><span data-v-f875f3fc>3/10/2022</span></i> <!----> <i class="tags iconfont reco-tag" data-v-f875f3fc><span class="tag-item" data-v-f875f3fc>Docker</span></i></div></div> <div class="theme-reco-content content__default"><h1 id="测试网址-http-120-76-216-233"><a href="#测试网址-http-120-76-216-233" class="header-anchor">#</a> 测试网址： http://120.76.216.233</h1> <h1 id="docker"><a href="#docker" class="header-anchor">#</a> Docker</h1> <p>学习自狂神 视频链接：https://www.bilibili.com/video/BV1og4y1q7M4?p=13&amp;share_source=copy_web</p> <h2 id="docker能干嘛"><a href="#docker能干嘛" class="header-anchor">#</a> Docker能干嘛</h2> <img src="/assets/img/image-20220313151619095.png">
虚拟机技术缺点：
<ol><li>资源占用十分多</li> <li>冗余步骤多</li> <li>启动很慢！</li></ol> <blockquote><p>容器化技术
<img src="/assets/img/image-20220313164034857.png"></p></blockquote> <p>比较Docker和虚拟机技术的不同:</p> <ul><li><p>传统虚拟机，虚拟出一条硬件，运行一个完整的操作系统，然后在这个系统上安装和运行软件</p></li> <li><p>容器内的应用直接运行在宿主机的内容，容器是没有自己的内核的</p></li> <li><p>每个容器间是相互隔离的，每个容器内都有一个属于自己的文件系统，互不影响</p></li></ul> <blockquote><p>DevOps(开发、运维)</p></blockquote> <p><strong>应用更快速的交付和部署</strong></p> <p>传统：一堆帮助文档 安装程序</p> <p>Docker：打包镜像发布测试，一键运行</p> <p><strong>更便捷的升级和扩容</strong></p> <p>使用了Docker后我们部署应用就和搭积木一样！</p> <p>项目打包为一个镜像，扩展 服务器A！ 服务器B</p> <h2 id="docker名词"><a href="#docker名词" class="header-anchor">#</a> Docker名词</h2> <img src="/assets/img/image-20220313165144172.png"> <p>镜像（image）：</p> <p>docker镜像就好比是一个模板，可以通过这个模板来创建容器服务，tomcat镜像--&gt;run --&gt;tomcat01</p> <p>容器（contalner）：</p> <p>Docker利用容器技术，独立运行一个或者一个组应用，通过镜像来创建的</p> <p>启动、停止、删除基本命令</p> <p>目前可以把这个容器理解为一个简单的Linux系统</p> <p>仓库（repository）：</p> <p>仓库就是存放镜像的地方！</p> <p>仓库分为共有仓库和私有仓库</p> <p>Docker Hub(默认国外)</p> <h2 id="安装docker"><a href="#安装docker" class="header-anchor">#</a> 安装Docker</h2> <blockquote><p>环境要求</p></blockquote> <p>CentOs 7 内核版本3.10以上</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ opt<span class="token punctuation">]</span><span class="token comment"># uname -r</span>
<span class="token number">3.10</span>.0-1127.19.1.el7.x86_64
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ opt<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>安装</p></blockquote> <p>官方文档：https://docs.docker.com/engine/install/centos/</p> <p>1.删除旧的Docker</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> yum remove <span class="token function">docker</span> <span class="token punctuation">\</span>
                  docker-client <span class="token punctuation">\</span>
                  docker-client-latest <span class="token punctuation">\</span>
                  docker-common <span class="token punctuation">\</span>
                  docker-latest <span class="token punctuation">\</span>
                  docker-latest-logrotate <span class="token punctuation">\</span>
                  docker-logrotate <span class="token punctuation">\</span>
                  docker-engine
                  
<span class="token comment">#安装需要的安装包</span>
<span class="token function">sudo</span> yum <span class="token function">install</span> -y yum-utils

<span class="token comment">#设置镜像源仓库</span>
<span class="token function">sudo</span> yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo

<span class="token comment">#更新yum包</span>
yum makecache fast

<span class="token comment">#安装Docker相关内容 docker-ce 社区版 -ee是企业版 </span>
<span class="token function">sudo</span> yum <span class="token function">install</span> docker-ce docker-ce-cli containerd.io

<span class="token comment">#启动Docker</span>
<span class="token function">sudo</span> systemctl start <span class="token function">docker</span>

<span class="token comment">#检查是否安装成功</span>
<span class="token function">docker</span> vsersion
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><img src="/assets/img/image-20220313171350268.png"> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#运行helloworld</span>
<span class="token function">docker</span> run hello-world
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><img src="/assets/img/image-20220313171553287.png"> <p>分析：一开始说找不到镜像，（Pulling）然后去官方拉去镜像，拉取后输出（Hello from Docker）</p> <p>此时证明安装成功！</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#查看下载的hello-world镜像是否存在</span>
<span class="token function">docker</span> images
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>了解：卸载docker</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#删除运行环境</span>
<span class="token function">sudo</span> yum remove docker-ce docker-ce-cli containerd.io
<span class="token comment">#删除目录、资源</span>
 <span class="token function">sudo</span> <span class="token function">rm</span> -rf /var/lib/docker
 <span class="token function">sudo</span> <span class="token function">rm</span> -rf /var/lib/containerd
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="阿里云镜像加速"><a href="#阿里云镜像加速" class="header-anchor">#</a> 阿里云镜像加速</h2> <p>1.登录阿里云然后找到镜像服务
<img src="/assets/img/image-20220313172109307.png"></p> <p>2.找到镜像加速器
<img src="/assets/img/image-20220313172202128.png"></p> <p>配置加速：
<img src="/assets/img/image-20220313172246190.png"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">mkdir</span> -p /etc/docker
<span class="token function">sudo</span> <span class="token function">tee</span> /etc/docker/daemon.json <span class="token operator">&lt;&lt;-</span><span class="token string">'EOF'
{
  &quot;registry-mirrors&quot;: [&quot;https://omgw3mz7.mirror.aliyuncs.com&quot;]
}
EOF</span>
<span class="token function">sudo</span> systemctl daemon-reload
<span class="token function">sudo</span> systemctl restart <span class="token function">docker</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="helloworld运行原理"><a href="#helloworld运行原理" class="header-anchor">#</a> HelloWorld运行原理</h2> <img src="/assets/img/image-20220313172713744.png"> <h2 id="底层原理"><a href="#底层原理" class="header-anchor">#</a> 底层原理</h2> <p>Docker是怎么工作的？</p> <p>Docker是一个CS结构系统（Client-Server）,Docker的守护进程运行在主机上，通过Socket客户端访问</p> <p>DockerServer 接收到Docker-Client的指令，就会执行这个命令。
<img src="/assets/img/image-20220313173237009.png"></p> <blockquote><p>Docker为什么比VM快</p></blockquote> <ol><li>Docker有比虚拟机更少的抽象层</li> <li>Docker利用的是宿主机的内核，vm需要的是GuestOS</li> <li></li></ol> <img src="/assets/img/image-20220313173529309.png"> <p>所以说，新建一个容器的时候，docker不需要想虚拟机一样重新加载一个操作系统内核，避免引导。虚拟机是加载Guest 0S，分钟级别的，而docker是利用宿主机的操作系统吗，省略了这个复杂的过程，秒级!</p> <h1 id="docker常用命令"><a href="#docker常用命令" class="header-anchor">#</a> Docker常用命令</h1> <h2 id="帮助命令"><a href="#帮助命令" class="header-anchor">#</a> 帮助命令</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> version    <span class="token comment">#docker版本信息</span>
<span class="token function">docker</span> info		  <span class="token comment">#docker系统信息</span>
<span class="token function">docker</span> 命令 --help <span class="token comment">#万能命令，查阅所有命令</span>

REPOSITORY  镜像的仓库源
TAG         镜像的标签
IMAGE ID    镜像的Id   
CREATED     镜像的创建时间   
SIZE		镜像的大小

<span class="token comment">#可选项 docker images --help获得</span>
-a, --all  <span class="token comment">#列出所有镜像</span>
-q, --quiet <span class="token comment">#只显示镜像的id</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="镜像命令"><a href="#镜像命令" class="header-anchor">#</a> 镜像命令</h2> <p><strong>docker pull</strong> 下载镜像</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ /<span class="token punctuation">]</span><span class="token comment"># docker pull mysql #docker pull mysql tag</span>
Using default tag: latest <span class="token comment">#若不写tag，默认为latest</span>
latest: Pulling from library/mysql
72a69066d2fe: Pull complete  <span class="token comment">#分层下载</span>
93619dbc5b36: Pull complete 
99da31dd6142: Pull complete 
626033c43d70: Pull complete 
37d5d7efb64e: Pull complete 
ac563158d721: Pull complete 
d2ba16033dad: Pull complete 
688ba7d5c01a: Pull complete 
00e060b6d11d: Pull complete 
1c04857f594f: Pull complete 
4d7cfa90e6ea: Pull complete 
e0431212d27d: Pull complete 
Digest: sha256:e9027fe4d91c0153429607251656806cc784e914937271037f7738bd5b8e7709 <span class="token comment">#签名</span>
Status: Downloaded newer image <span class="token keyword">for</span> mysql:latest
docker.io/library/mysql:latest <span class="token comment">#真实地址</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><img src="/assets/img/image-20220313175737456.png"> <p>分层下载！</p> <p>一起已经下了的是公用的！</p> <p>删除Image</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> rmi -f ImageId <span class="token comment">#docker images 可以搜索所有镜像</span>
<span class="token function">docker</span> rmi -f 容器ID 容器Id 容器ID <span class="token comment">#删除多个容器</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><img src="/assets/img/image-20220313175922780.png"> <h2 id="容器命令"><a href="#容器命令" class="header-anchor">#</a> 容器命令</h2> <blockquote><p>我们有了镜像才可以创建容器，linux，下载一个镜像来学习</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> pull centos
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>新建容器并启动</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token punctuation">[</span>可选参数<span class="token punctuation">]</span> image

<span class="token comment">#参数说明</span>
--name<span class="token operator">=</span><span class="token string">&quot;Name&quot;</span> 容器名字，tomcat01，tomcat02用来区分容器
-d			  后台方式运行
-it           使用交互方式运行
-p            指定容器端口 -p <span class="token number">8080</span>:8080
	-p 主机端口：容器端口
	-p 容器端口
-p             随机指定端口
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>启动并进入容器</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#docker run -it centos /bin/bash</span>

<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ /<span class="token punctuation">]</span><span class="token comment"># docker run -it centos /bin/bash</span>
<span class="token punctuation">[</span>root@8bc7ec4dcb78 /<span class="token punctuation">]</span><span class="token comment"># ls</span>
bin  etc   lib	  lost+found  mnt  proc  run   srv  tmp  var
dev  home  lib64  media       opt  root  sbin  sys  usr

<span class="token punctuation">[</span>root@8bc7ec4dcb78 /<span class="token punctuation">]</span><span class="token comment"># exit</span>
<span class="token builtin class-name">exit</span>
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ /<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><img src="/assets/img/image-20220313181255259.png"> <p><strong>列出所有的运行的容器</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#docker ps 命令</span>
			<span class="token comment">#列出当前运行的容器</span>
			-a <span class="token comment">#最近运行的容器</span>
			-n<span class="token operator">=</span>? <span class="token comment">#显示最近运行的n个容器</span>
			-q  <span class="token comment">#只显示容器的编号</span>
			-aq <span class="token comment">#显示所有最近创建的容器的编号</span>
			
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ /<span class="token punctuation">]</span><span class="token comment"># docker ps</span>
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ /<span class="token punctuation">]</span><span class="token comment"># docker ps -a</span>
CONTAINER ID   IMAGE         COMMAND       CREATED             STATUS                         PORTS     NAMES
8bc7ec4dcb78   centos        <span class="token string">&quot;/bin/bash&quot;</span>   <span class="token number">9</span> minutes ago       Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">7</span> minutes ago                 intelligent_dijkstra
8f347ada525a   hello-world   <span class="token string">&quot;/hello&quot;</span>      About an hour ago   Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> About an hour ago             happy_faraday

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><strong>退出容器</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">exit</span> <span class="token comment">#直接容器停止并退出</span>
Ctrl+P+Q <span class="token comment">#容器不停止但退出</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>删除容器</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token function">rm</span> 容器id                <span class="token comment">#删除指定容器</span>
<span class="token function">docker</span> <span class="token function">rm</span> -f <span class="token variable"><span class="token variable">$(</span><span class="token function">docker</span> <span class="token function">ps</span> -ap<span class="token variable">)</span></span>  <span class="token comment">#删除所有容器</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>启动和停止容器</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> start 容器ID   <span class="token comment">#启动容器</span>
<span class="token function">docker</span> restart 容器Id	<span class="token comment">#重启容器</span>
<span class="token function">docker</span> restart 容器Id	<span class="token comment">#停止当前正在运行的容器</span>
<span class="token function">docker</span> <span class="token function">kill</span> 容器Id	<span class="token comment">#强制停止当前容器</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="其他常用命令"><a href="#其他常用命令" class="header-anchor">#</a> 其他常用命令</h2> <p><strong>后台启动容器</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#命令 docker run -d 镜像名</span>
<span class="token function">docker</span> run -d centos
<span class="token comment">#问题 docker ps 发现centos挺固执了</span>

<span class="token comment">#常见的坑;docker容器使用后台运行，就必须要有要一个前台进程，docker发现没有应用，就会自动停止nginx，容器启动后，发现自己没有提供服务，就会立刻停止，就是没有程序了</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>查看日志</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> logs -f -t --tail 容器Id
<span class="token comment">#显示日志</span>
-tf <span class="token comment">#显示日志</span>
-tail number <span class="token comment">#要显示的日志条数 docker logs -tf --tail 10 容器</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>查看容器中进程信息</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#命令 docker top 容器ID</span>
<span class="token function">docker</span> <span class="token function">top</span> dce7b23skjdbf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>查看镜像的元数据</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#docker inspect 容器id</span>
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ /<span class="token punctuation">]</span><span class="token comment"># docker inspect d367ea67c454</span>
<span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token string">&quot;Id&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;d367ea67c454d99b8c845b29c693909825d51bb19bdff91608b6647ee20f0d16&quot;</span>,
        <span class="token string">&quot;Created&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;2022-03-13T10:29:52.261895051Z&quot;</span>,
        <span class="token string">&quot;Path&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/bin/bash&quot;</span>,
        <span class="token string">&quot;Args&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>,
        <span class="token string">&quot;State&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;Status&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;running&quot;</span>,
            <span class="token string">&quot;Running&quot;</span><span class="token builtin class-name">:</span> true,
            <span class="token string">&quot;Paused&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;Restarting&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;OOMKilled&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;Dead&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;Pid&quot;</span><span class="token builtin class-name">:</span> <span class="token number">22044</span>,
            <span class="token string">&quot;ExitCode&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;Error&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;StartedAt&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;2022-03-13T10:43:41.072934916Z&quot;</span>,
            <span class="token string">&quot;FinishedAt&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;2022-03-13T10:30:56.721112188Z&quot;</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;Image&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;sha256:5d0da3dc976460b72c77d94c8a1ad043720b0416bfc16c52c45d4847e53fadb6&quot;</span>,
        <span class="token string">&quot;ResolvConfPath&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/var/lib/docker/containers/d367ea67c454d99b8c845b29c693909825d51bb19bdff91608b6647ee20f0d16/resolv.conf&quot;</span>,
        <span class="token string">&quot;HostnamePath&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/var/lib/docker/containers/d367ea67c454d99b8c845b29c693909825d51bb19bdff91608b6647ee20f0d16/hostname&quot;</span>,
        <span class="token string">&quot;HostsPath&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/var/lib/docker/containers/d367ea67c454d99b8c845b29c693909825d51bb19bdff91608b6647ee20f0d16/hosts&quot;</span>,
        <span class="token string">&quot;LogPath&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/var/lib/docker/containers/d367ea67c454d99b8c845b29c693909825d51bb19bdff91608b6647ee20f0d16/d367ea67c454d99b8c845b29c693909825d51bb19bdff91608b6647ee20f0d16-json.log&quot;</span>,
        <span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/keen_kilby&quot;</span>,
        <span class="token string">&quot;RestartCount&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
        <span class="token string">&quot;Driver&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;overlay2&quot;</span>,
        <span class="token string">&quot;Platform&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;linux&quot;</span>,
        <span class="token string">&quot;MountLabel&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
        <span class="token string">&quot;ProcessLabel&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
        <span class="token string">&quot;AppArmorProfile&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
        <span class="token string">&quot;ExecIDs&quot;</span><span class="token builtin class-name">:</span> null,
        <span class="token string">&quot;HostConfig&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;Binds&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;ContainerIDFile&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;LogConfig&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;Type&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;json-file&quot;</span>,
                <span class="token string">&quot;Config&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
            <span class="token punctuation">}</span>,
            <span class="token string">&quot;NetworkMode&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;default&quot;</span>,
            <span class="token string">&quot;PortBindings&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>,
            <span class="token string">&quot;RestartPolicy&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;no&quot;</span>,
                <span class="token string">&quot;MaximumRetryCount&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>
            <span class="token punctuation">}</span>,
            <span class="token string">&quot;AutoRemove&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;VolumeDriver&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;VolumesFrom&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;CapAdd&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;CapDrop&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;CgroupnsMode&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;host&quot;</span>,
            <span class="token string">&quot;Dns&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>,
            <span class="token string">&quot;DnsOptions&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>,
            <span class="token string">&quot;DnsSearch&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>,
            <span class="token string">&quot;ExtraHosts&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;GroupAdd&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;IpcMode&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;private&quot;</span>,
            <span class="token string">&quot;Cgroup&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;Links&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;OomScoreAdj&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;PidMode&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;Privileged&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;PublishAllPorts&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;ReadonlyRootfs&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;SecurityOpt&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;UTSMode&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;UsernsMode&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;ShmSize&quot;</span><span class="token builtin class-name">:</span> <span class="token number">67108864</span>,
            <span class="token string">&quot;Runtime&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;runc&quot;</span>,
            <span class="token string">&quot;ConsoleSize&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token number">0</span>,
                <span class="token number">0</span>
            <span class="token punctuation">]</span>,
            <span class="token string">&quot;Isolation&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;CpuShares&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;Memory&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;NanoCpus&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;CgroupParent&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;BlkioWeight&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;BlkioWeightDevice&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>,
            <span class="token string">&quot;BlkioDeviceReadBps&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;BlkioDeviceWriteBps&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;BlkioDeviceReadIOps&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;BlkioDeviceWriteIOps&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;CpuPeriod&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;CpuQuota&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;CpuRealtimePeriod&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;CpuRealtimeRuntime&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;CpusetCpus&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;CpusetMems&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;Devices&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>,
            <span class="token string">&quot;DeviceCgroupRules&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;DeviceRequests&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;KernelMemory&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;KernelMemoryTCP&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;MemoryReservation&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;MemorySwap&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;MemorySwappiness&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;OomKillDisable&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;PidsLimit&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;Ulimits&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;CpuCount&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;CpuPercent&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;IOMaximumIOps&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;IOMaximumBandwidth&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;MaskedPaths&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;/proc/asound&quot;</span>,
                <span class="token string">&quot;/proc/acpi&quot;</span>,
                <span class="token string">&quot;/proc/kcore&quot;</span>,
                <span class="token string">&quot;/proc/keys&quot;</span>,
                <span class="token string">&quot;/proc/latency_stats&quot;</span>,
                <span class="token string">&quot;/proc/timer_list&quot;</span>,
                <span class="token string">&quot;/proc/timer_stats&quot;</span>,
                <span class="token string">&quot;/proc/sched_debug&quot;</span>,
                <span class="token string">&quot;/proc/scsi&quot;</span>,
                <span class="token string">&quot;/sys/firmware&quot;</span>
            <span class="token punctuation">]</span>,
            <span class="token string">&quot;ReadonlyPaths&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;/proc/bus&quot;</span>,
                <span class="token string">&quot;/proc/fs&quot;</span>,
                <span class="token string">&quot;/proc/irq&quot;</span>,
                <span class="token string">&quot;/proc/sys&quot;</span>,
                <span class="token string">&quot;/proc/sysrq-trigger&quot;</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;GraphDriver&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;Data&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;LowerDir&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/var/lib/docker/overlay2/19c9a4adf9fadc6167ee5fda1b268322f58496f432b9027c53b31bf097fd0450-init/diff:/var/lib/docker/overlay2/8452c5431402ad6e5684578fd5bcea95d881f6c421af364c7123f0763dd55832/diff&quot;</span>,
                <span class="token string">&quot;MergedDir&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/var/lib/docker/overlay2/19c9a4adf9fadc6167ee5fda1b268322f58496f432b9027c53b31bf097fd0450/merged&quot;</span>,
                <span class="token string">&quot;UpperDir&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/var/lib/docker/overlay2/19c9a4adf9fadc6167ee5fda1b268322f58496f432b9027c53b31bf097fd0450/diff&quot;</span>,
                <span class="token string">&quot;WorkDir&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/var/lib/docker/overlay2/19c9a4adf9fadc6167ee5fda1b268322f58496f432b9027c53b31bf097fd0450/work&quot;</span>
            <span class="token punctuation">}</span>,
            <span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;overlay2&quot;</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;Mounts&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>,
        <span class="token string">&quot;Config&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;Hostname&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;d367ea67c454&quot;</span>,
            <span class="token string">&quot;Domainname&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;User&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;AttachStdin&quot;</span><span class="token builtin class-name">:</span> true,
            <span class="token string">&quot;AttachStdout&quot;</span><span class="token builtin class-name">:</span> true,
            <span class="token string">&quot;AttachStderr&quot;</span><span class="token builtin class-name">:</span> true,
            <span class="token string">&quot;Tty&quot;</span><span class="token builtin class-name">:</span> true,
            <span class="token string">&quot;OpenStdin&quot;</span><span class="token builtin class-name">:</span> true,
            <span class="token string">&quot;StdinOnce&quot;</span><span class="token builtin class-name">:</span> true,
            <span class="token string">&quot;Env&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span>
            <span class="token punctuation">]</span>,
            <span class="token string">&quot;Cmd&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;/bin/bash&quot;</span>
            <span class="token punctuation">]</span>,
            <span class="token string">&quot;Image&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;centos&quot;</span>,
            <span class="token string">&quot;Volumes&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;WorkingDir&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;Entrypoint&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;OnBuild&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;Labels&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;org.label-schema.build-date&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;20210915&quot;</span>,
                <span class="token string">&quot;org.label-schema.license&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;GPLv2&quot;</span>,
                <span class="token string">&quot;org.label-schema.name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;CentOS Base Image&quot;</span>,
                <span class="token string">&quot;org.label-schema.schema-version&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;1.0&quot;</span>,
                <span class="token string">&quot;org.label-schema.vendor&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;CentOS&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;NetworkSettings&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;Bridge&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;SandboxID&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;23206ebcd835193855f1a641424d50c515770bd81d14e99bc8e75b4ff7a73d33&quot;</span>,
            <span class="token string">&quot;HairpinMode&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;LinkLocalIPv6Address&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;LinkLocalIPv6PrefixLen&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;Ports&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>,
            <span class="token string">&quot;SandboxKey&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/var/run/docker/netns/23206ebcd835&quot;</span>,
            <span class="token string">&quot;SecondaryIPAddresses&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;SecondaryIPv6Addresses&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;EndpointID&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;ce314210bc7f0f2d174deb608b1cde1a2f5b6618d3ff077634aea9755c94e818&quot;</span>,
            <span class="token string">&quot;Gateway&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;172.17.0.1&quot;</span>,
            <span class="token string">&quot;GlobalIPv6Address&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;GlobalIPv6PrefixLen&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;IPAddress&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;172.17.0.2&quot;</span>,
            <span class="token string">&quot;IPPrefixLen&quot;</span><span class="token builtin class-name">:</span> <span class="token number">16</span>,
            <span class="token string">&quot;IPv6Gateway&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;MacAddress&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;02:42:ac:11:00:02&quot;</span>,
            <span class="token string">&quot;Networks&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;bridge&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                    <span class="token string">&quot;IPAMConfig&quot;</span><span class="token builtin class-name">:</span> null,
                    <span class="token string">&quot;Links&quot;</span><span class="token builtin class-name">:</span> null,
                    <span class="token string">&quot;Aliases&quot;</span><span class="token builtin class-name">:</span> null,
                    <span class="token string">&quot;NetworkID&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;989c2170cac43de814668de4c7a551b400ff0b34b7de2e8163f55ad3ed40256e&quot;</span>,
                    <span class="token string">&quot;EndpointID&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;ce314210bc7f0f2d174deb608b1cde1a2f5b6618d3ff077634aea9755c94e818&quot;</span>,
                    <span class="token string">&quot;Gateway&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;172.17.0.1&quot;</span>,
                    <span class="token string">&quot;IPAddress&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;172.17.0.2&quot;</span>,
                    <span class="token string">&quot;IPPrefixLen&quot;</span><span class="token builtin class-name">:</span> <span class="token number">16</span>,
                    <span class="token string">&quot;IPv6Gateway&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
                    <span class="token string">&quot;GlobalIPv6Address&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
                    <span class="token string">&quot;GlobalIPv6PrefixLen&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
                    <span class="token string">&quot;MacAddress&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;02:42:ac:11:00:02&quot;</span>,
                    <span class="token string">&quot;DriverOpts&quot;</span><span class="token builtin class-name">:</span> null
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br></div></div><p><strong>进入当前正在运行的容器</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#我们通常容器都是使用后台方式运行，需要进入容器，修改一些配置</span>

<span class="token comment">#命令</span>
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> -it 容器id
<span class="token comment">#测试</span>
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ /<span class="token punctuation">]</span><span class="token comment"># docker ps</span>
CONTAINER ID   IMAGE     COMMAND       CREATED          STATUS         PORTS     NAMES
d367ea67c454   centos    <span class="token string">&quot;/bin/bash&quot;</span>   <span class="token number">17</span> minutes ago   Up <span class="token number">3</span> minutes             keen_kilby
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ /<span class="token punctuation">]</span><span class="token comment"># docker exec -it d367ea67c454 /bin/bash</span>
<span class="token punctuation">[</span>root@d367ea67c454 /<span class="token punctuation">]</span><span class="token comment"># ls</span>
bin  etc   lib	  lost+found  mnt  proc  run   srv  tmp  var
dev  home  lib64  media       opt  root  sbin  sys  usr
<span class="token punctuation">[</span>root@d367ea67c454 /<span class="token punctuation">]</span><span class="token comment"># ps -ef</span>
<span class="token environment constant">UID</span>        PID  <span class="token environment constant">PPID</span>  C STIME TTY          TIME CMD
root         <span class="token number">1</span>     <span class="token number">0</span>  <span class="token number">0</span> <span class="token number">10</span>:43 pts/0    00:00:00 /bin/bash
root        <span class="token number">15</span>     <span class="token number">0</span>  <span class="token number">0</span> <span class="token number">10</span>:47 pts/1    00:00:00 /bin/bash
root        <span class="token number">30</span>    <span class="token number">15</span>  <span class="token number">0</span> <span class="token number">10</span>:48 pts/1    00:00:00 <span class="token function">ps</span> -ef



<span class="token comment">#方法二</span>
<span class="token comment">#命令 docker attach 容器id</span>
<span class="token comment">#测试</span>
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ /<span class="token punctuation">]</span><span class="token comment"># docker attach  d367ea67c454</span>
<span class="token punctuation">[</span>root@d367ea67c454 /<span class="token punctuation">]</span><span class="token comment"># exit</span>
<span class="token builtin class-name">exit</span>

<span class="token comment">#docker exec   #进入容器后开启一个新的终端，在里面操作</span>
<span class="token comment">#docker attach #进入容器正在执行的终端，不会新建终端</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p><strong>从容器内拷贝数据到主机</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#命令 docker cp 容器id:容器内路径 目的的主机路径</span>

<span class="token comment">#测试</span>
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ ~<span class="token punctuation">]</span><span class="token comment"># docker run -it centos /bin/bash #启动容器</span>
<span class="token punctuation">[</span>root@261bb1145d2e /<span class="token punctuation">]</span><span class="token comment"># cd /home</span>
<span class="token punctuation">[</span>root@261bb1145d2e home<span class="token punctuation">]</span><span class="token comment"># ls</span>
<span class="token punctuation">[</span>root@261bb1145d2e home<span class="token punctuation">]</span><span class="token comment"># [root@iZwz969hnvixoyx8d2dmbvZ ~]#  #退出容器但不关掉容器，这步多余 Ctrl+P+Q实现</span>
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ ~<span class="token punctuation">]</span><span class="token comment"># docker ps</span>
CONTAINER ID   IMAGE     COMMAND       CREATED              STATUS              PORTS     NAMES
261bb1145d2e   centos    <span class="token string">&quot;/bin/bash&quot;</span>   About a minute ago   Up About a minute             focused_colden
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ home<span class="token punctuation">]</span><span class="token comment"># docker ps</span>
CONTAINER ID   IMAGE     COMMAND       CREATED              STATUS              PORTS     NAMES
261bb1145d2e   centos    <span class="token string">&quot;/bin/bash&quot;</span>   About a minute ago   Up About a minute             focused_colden
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ home<span class="token punctuation">]</span><span class="token comment"># docker attach 261bb1145d2e #进入容器</span>
<span class="token punctuation">[</span>root@261bb1145d2e home<span class="token punctuation">]</span><span class="token comment"># ls</span>
<span class="token punctuation">[</span>root@261bb1145d2e home<span class="token punctuation">]</span><span class="token comment"># touch bashtest.java #创建文件</span>
<span class="token punctuation">[</span>root@261bb1145d2e home<span class="token punctuation">]</span><span class="token comment"># exit #退出并关闭容器</span>
<span class="token builtin class-name">exit</span>
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ home<span class="token punctuation">]</span><span class="token comment"># docker ps -a</span>
CONTAINER ID   IMAGE         COMMAND       CREATED          STATUS                      PORTS     NAMES
261bb1145d2e   centos        <span class="token string">&quot;/bin/bash&quot;</span>   <span class="token number">3</span> minutes ago    Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">4</span> seconds ago              focused_colden
eaf8ee96f004   centos        <span class="token string">&quot;/bin/bash&quot;</span>   <span class="token number">3</span> minutes ago    Exited <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token number">3</span> minutes ago              busy_lamport
d367ea67c454   centos        <span class="token string">&quot;/bin/bash&quot;</span>   <span class="token number">29</span> minutes ago   Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">8</span> minutes ago              keen_kilby
8bc7ec4dcb78   centos        <span class="token string">&quot;/bin/bash&quot;</span>   <span class="token number">46</span> minutes ago   Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">45</span> minutes ago             intelligent_dijkstra
8f347ada525a   hello-world   <span class="token string">&quot;/hello&quot;</span>      <span class="token number">2</span> hours ago      Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">2</span> hours ago                happy_faraday
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ home<span class="token punctuation">]</span><span class="token comment"># docker ps</span>
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ home<span class="token punctuation">]</span><span class="token comment"># docker cp 261bb1145d2e:/home/bashtest.java  /home #将容器数据复制到主机</span>
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ home<span class="token punctuation">]</span><span class="token comment"># ls </span>
bashtest.java  test.java
<span class="token comment">#拷贝是个手动过程，未来我们使用 -v卷的技术，可以实现，自动同步</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h2 id="练习"><a href="#练习" class="header-anchor">#</a> 练习</h2> <h3 id="小练习1-nginx"><a href="#小练习1-nginx" class="header-anchor">#</a> 小练习1：Nginx</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#安装</span>
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ home<span class="token punctuation">]</span><span class="token comment"># docker pull nginx</span>
Using default tag: latest
latest: Pulling from library/nginx
a2abf6c4d29d: Pull complete 
a9edb18cadd1: Pull complete 
589b7251471a: Pull complete 
186b1aaa4aa6: Pull complete 
b4df32aa5a72: Pull complete 
a0bcbecc962e: Pull complete 
Digest: sha256:0d17b565c37bcbd895e9d92315a05c1c3c9a29f762b011a10c54a66cd53c9b31
Status: Downloaded newer image <span class="token keyword">for</span> nginx:latest
docker.io/library/nginx:latest
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ home<span class="token punctuation">]</span><span class="token comment"># docker images</span>
REPOSITORY    TAG       IMAGE ID       CREATED        SIZE
nginx         latest    605c77e624dd   <span class="token number">2</span> months ago   141MB
hello-world   latest    feb5d9fea6a5   <span class="token number">5</span> months ago   <span class="token number">13</span>.3kB
centos        latest    5d0da3dc9764   <span class="token number">5</span> months ago   231MB
<span class="token comment">#测试</span>
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ home<span class="token punctuation">]</span><span class="token comment"># docker run -d --name nginx01 -p:3344</span>
<span class="token string">&quot;docker run&quot;</span> requires at least <span class="token number">1</span> argument.
See <span class="token string">'docker run --help'</span><span class="token builtin class-name">.</span>

Usage:  <span class="token function">docker</span> run <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> IMAGE <span class="token punctuation">[</span>COMMAND<span class="token punctuation">]</span> <span class="token punctuation">[</span>ARG<span class="token punctuation">..</span>.<span class="token punctuation">]</span>

Run a <span class="token builtin class-name">command</span> <span class="token keyword">in</span> a new container
<span class="token comment">#启动nginx docker run -d --name nginx01 -p:3344:80 nginx</span>
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ home<span class="token punctuation">]</span><span class="token comment"># docker run -d --name nginx01 -p:3344:80 nginx</span>
<span class="token punctuation">\</span>d8ac68ea2da3bdb2022bdc9e6a6adb7ab56be04f343ecbee8eb092473652194d
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ home<span class="token punctuation">]</span><span class="token comment"># docker ps</span>
CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS                                   NAMES
d8ac68ea2da3   nginx     <span class="token string">&quot;/docker-entrypoint.…&quot;</span>   <span class="token number">20</span> seconds ago   Up <span class="token number">19</span> seconds   <span class="token number">0.0</span>.0.0:3344-<span class="token operator">&gt;</span><span class="token number">80</span>/tcp, :::3344-<span class="token operator">&gt;</span><span class="token number">80</span>/tcp   nginx01
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ home<span class="token punctuation">]</span><span class="token comment"># curl localhost:3344</span>
<span class="token operator">&lt;</span><span class="token operator">!</span>DOCTYPE html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Welcome to nginx<span class="token operator">!</span><span class="token operator">&lt;</span>/title<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>
html <span class="token punctuation">{</span> color-scheme: light dark<span class="token punctuation">;</span> <span class="token punctuation">}</span>
body <span class="token punctuation">{</span> width: 35em<span class="token punctuation">;</span> margin: <span class="token number">0</span> auto<span class="token punctuation">;</span>
font-family: Tahoma, Verdana, Arial, sans-serif<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token operator">&lt;</span>/style<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>Welcome to nginx<span class="token operator">!</span><span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>
<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>If you see this page, the nginx web server is successfully installed and
working. Further configuration is required.<span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>For online documentation and support please refer to
<span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">&quot;http://nginx.org/&quot;</span><span class="token operator">&gt;</span>nginx.org<span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span>.<span class="token operator">&lt;</span>br/<span class="token operator">&gt;</span>
Commercial support is available at
<span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">&quot;http://nginx.com/&quot;</span><span class="token operator">&gt;</span>nginx.com<span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span>.<span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token operator">&lt;</span>em<span class="token operator">&gt;</span>Thank you <span class="token keyword">for</span> using nginx.<span class="token operator">&lt;</span>/em<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/html<span class="token operator">&gt;</span>
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ home<span class="token punctuation">]</span><span class="token comment"># </span>

<span class="token comment">#进入容器</span>
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ home<span class="token punctuation">]</span><span class="token comment"># docker exec -it nginx01 /bin/bash</span>
root@d8ac68ea2da3:/<span class="token comment"># whereis nginx</span>
nginx: /usr/sbin/nginx /usr/lib/nginx /etc/nginx /usr/share/nginx
root@d8ac68ea2da3:/<span class="token comment"># cd /etc/nginx</span>
root@d8ac68ea2da3:/etc/nginx<span class="token comment"># ls</span>
conf.d	fastcgi_params	mime.types  modules  nginx.conf  scgi_params  uwsgi_params
root@d8ac68ea2da3:/etc/nginx<span class="token comment"># </span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br></div></div><p><strong>端口暴露原理</strong> <img src="/assets/img/image-20220313211738587.png"></p> <h3 id="小练习2-tomcat"><a href="#小练习2-tomcat" class="header-anchor">#</a> 小练习2：TomCat</h3> <blockquote><p>安装</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#官方的使用</span>
<span class="token function">docker</span> run -it --rm tomcat:9.0

<span class="token comment">#我们之前的启动都是后台，停止了容器之后，容器还是可以查到  docker run -it --rm 一般用来测试，用完就删除</span>

<span class="token comment">#我们还是先下载再启动</span>
<span class="token function">docker</span> pull tomcat

<span class="token comment">#启动运行</span>
<span class="token function">docker</span> run -d -p <span class="token number">8080</span>:8080 --name tomcat01 tomcat

<span class="token comment">#测试访问没有问题</span>
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ home<span class="token punctuation">]</span><span class="token comment"># docker exec -it tomcat01 /bin/bash</span>

<span class="token comment">#发现问题：1、linux命令少了 2.没有webapps 阿里云镜像的原因，默认最小的镜像，所以不必要的都删除掉，保证最小的工作环境</span>
<span class="token comment">#这样后，访问才不是404</span>
root@9d971489dd66:/usr/local/tomcat<span class="token comment"># cd webapps</span>
root@9d971489dd66:/usr/local/tomcat/webapps<span class="token comment"># ls</span>
root@9d971489dd66:/usr/local/tomcat/webapps<span class="token comment"># cd ../</span>
root@9d971489dd66:/usr/local/tomcat<span class="token comment"># ls</span>
BUILDING.txt	 NOTICE		RUNNING.txt  lib	     temp	   work
CONTRIBUTING.md  README.md	bin	     logs	     webapps
LICENSE		 RELEASE-NOTES	conf	     native-jni-lib  webapps.dist
root@9d971489dd66:/usr/local/tomcat<span class="token comment"># cp -r  webapps.dist/* webapps </span>
root@9d971489dd66:/usr/local/tomcat<span class="token comment"># cd webapps</span>
root@9d971489dd66:/usr/local/tomcat/webapps<span class="token comment"># ls</span>
ROOT  docs  examples  host-manager  manage

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="小练习3-es-kibana"><a href="#小练习3-es-kibana" class="header-anchor">#</a> 小练习3：es+kibana</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># es 暴露的接口很多</span>
<span class="token comment"># es 十分的耗内存</span>
<span class="token comment"># es 的数据一般需要放到安全网络</span>
<span class="token comment"># --net somenetwork ? 网络配置</span>
<span class="token comment"># 启动 elasticsearch</span>
<span class="token function">docker</span> run -d --name elasticsearch --net somenetwork -p <span class="token number">9200</span>:9200 -p <span class="token number">9300</span>:9300 -e <span class="token string">&quot;discovery.type=single-node&quot;</span> elasticsearch:7.6.2
<span class="token comment">#启动个虚拟就都不好了，变卡了，但我没有，因为我启动失败了，管他的，反正学生机跑不动</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="可视化工具"><a href="#可视化工具" class="header-anchor">#</a> 可视化工具</h2> <ul><li>portainer</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run -d -p <span class="token number">8088</span>:9000 <span class="token punctuation">\</span>
--restart<span class="token operator">=</span>always -v /var/run/docker.sock:/var/run/docker.sock --privileged<span class="token operator">=</span>true portainer/portainer
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>访问测试： http://120.76.216.233:8088/</p> <p>本机测试：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">curl</span> localhost:8088
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><img src="/assets/img/image-20220314003512399.png"> <p>密码：lh***********
<img src="/assets/img/image-20220314003653988.png"></p> <p>选择本地仓库</p> <p>可视化面板（平时不会用）
<img src="/assets/img/image-20220314003801052.png"></p> <h1 id="docker镜像"><a href="#docker镜像" class="header-anchor">#</a> Docker镜像</h1> <h2 id="镜像是什么"><a href="#镜像是什么" class="header-anchor">#</a> 镜像是什么？</h2> <p>镜像是一种轻量级、可执行的独立软件包，用来打包软件运行环境和基于运行环境开发的软件，它包含运行某个软件所需的所有内容，包括代码、运行时、库、环境变量和配置文件。</p> <p>所有的应用，直接打包docker镜像，就可以直接跑起来!</p> <p>镜像来源：</p> <ul><li>远程库拉取</li> <li>拷贝</li> <li>自己做镜像源</li></ul> <h2 id="镜像加载原理"><a href="#镜像加载原理" class="header-anchor">#</a> 镜像加载原理</h2> <blockquote><p>UnionFS(联合文件系统)</p></blockquote> <p>UnionFS ( 联合文件系统）: Union文件系统(UnionFS )是一种分层、轻量级并且高性能的文件系统，它支持对文件系统的修改作为一次提交来一层层的叠加，同时可以将不同目录挂载到同一个虚拟文件系统下(unite several directories into a single virtualfilesystem)。Union文件系统是Docker镜像的基础。镜像可以通过分层来进行继承，基于基础镜像（没有父镜像），可以制作各种具体的应用镜像。</p> <p>特性∶一次同时加载多个文件系统，但从外面看起来，只能看到一个文件系统，联合加载会把各层文件系统叠加起来，这样最终的文件系统会包含所有底层的文件和目录</p> <blockquote><p>Docker镜像加载原理</p></blockquote> <p>docker的镜像实际上由一层一层的文件系统组成，这种层级的文件系统UnionFs.</p> <p>bootfs(boot file system)主要包含bootloader和kernel, bootloader主要是引导加载kernel, Linux刚启动时会加载bootfs文件系统，在Docker镜像的最底层是bootfs。这一层与我们典型的Linux/Unix系统是一样的，包含boot加载器和内核。当boot加载完成之后整个内核就都在内存中了，此时内存的使用权已由bootfs转交给内核，此时系统也会卸载bootfs。</p> <p>rootfs (root file system)，在bootfs之上。包含的就是典型Linux系统中的/dev, /proc,/bin,/etc等标准目录和文件。roots就是各种不同的操作系统发行版，比如Ubuntu , Centos等等。
<img src="/assets/img/image-20220314004302987.png"></p> <p>为什么安装CentOS有几个G但Docker安装的只有几十M？</p> <p>对于一个精简的OS，rootfs 可以很小，只需要包含最基本的命令，工具和程序库就可以了，因为底层直接用Host的kernel，自己只需要提供rootfs就可以了。由此可见对于不同的linux发行版, bootfs基本是一致的, rootfs会有差别,因此不同的发行版可以公用bootfs。</p> <blockquote><p>分层</p></blockquote> <p><strong>所有的Docker镜像都起始于一个基础镜像层，当进行修改或增加新的内容时，就会在当前镜像层之上，创建新的镜像层。</strong></p> <p>举一个简单的例子，假如基于Ubuntu Linux 16.04创建一个新的镜像，这就是新镜像的第一层;如果在该镜像中添加Python包，就会在基础镜像层之上创建第二个镜像层;如果继续添加一个安全补丁，就会创建第三个镜像层。</p> <p>该镜像当前已经包含3个镜像层，如下图所示(这只是一个用于演示的很简单的例子)。
<img src="/assets/img/image-20220314100500411.png"></p> <img src="/assets/img/image-20220314101204495.png"> <p>这种情况下，上层镜像层中的文件覆盖了底层镜像层中的文件。这样就使得文件的更新版本作为一个新镜像层添加到镜像当中。Docker通过存储引擎（新版本采用快照机制)的方式来实现镜像层堆栈，并保证多镜像层对外展示为统一的文件系统</p> <p>Linux上可用的存储引擎有AUFS、Overlay2、Device Mapper、Btrfs以及ZFS。顾名思义，每种存储引擎都基于Linux中对应的文件系统或者块设备技术，并且每种存储引擎都有其独有的性能特点。</p> <blockquote><p>特点</p></blockquote> <p>Docker镜像都是只读的，当容器启动时，一个新的可写层被加载到镜像的顶部</p> <p>这一层就是我们常说的容器层，容器之下的都叫镜像层。
<img src="/assets/img/image-20220314101602516.png"></p> <h2 id="commit镜像"><a href="#commit镜像" class="header-anchor">#</a> commit镜像</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> commit <span class="token comment">#提交一个容器成为新的副本</span>
<span class="token function">docker</span> commit -m<span class="token operator">=</span><span class="token string">&quot;提交的描述信息&quot;</span> -a<span class="token operator">=</span><span class="token string">&quot;作者&quot;</span> 容器Id 目标镜像名：tag
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>测试</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#启动一个默认的tomcat</span>

<span class="token comment">#这个tomcat里webapps里没东西</span>

<span class="token comment">#我们考入基本文件后</span>
root@9d971489dd66:/usr/local/tomcat<span class="token comment"># cd webapps</span>
root@9d971489dd66:/usr/local/tomcat/webapps<span class="token comment"># ls</span>
root@9d971489dd66:/usr/local/tomcat/webapps<span class="token comment"># cd ../</span>
root@9d971489dd66:/usr/local/tomcat<span class="token comment"># ls</span>
BUILDING.txt	 NOTICE		RUNNING.txt  lib	     temp	   work
CONTRIBUTING.md  README.md	bin	     logs	     webapps
LICENSE		 RELEASE-NOTES	conf	     native-jni-lib  webapps.dist
root@9d971489dd66:/usr/local/tomcat<span class="token comment"># cp -r  webapps.dist/* webapps </span>
root@9d971489dd66:/usr/local/tomcat<span class="token comment"># cd webapps</span>
root@9d971489dd66:/usr/local/tomcat/webapps<span class="token comment"># ls</span>
ROOT  docs  examples  host-manager  manage

<span class="token comment">#考入完毕</span>

root@9d971489dd66:/usr/local/tomcat/webapps<span class="token comment"># exit</span>
<span class="token builtin class-name">exit</span>
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ ~<span class="token punctuation">]</span><span class="token comment"># docker ps #查询容器Id</span>
CONTAINER ID   IMAGE                 COMMAND             CREATED          STATUS          PORTS                                       NAMES
9d971489dd66   tomcat                <span class="token string">&quot;catalina.sh run&quot;</span>   <span class="token number">28</span> minutes ago   Up <span class="token number">28</span> minutes   <span class="token number">0.0</span>.0.0:8080-<span class="token operator">&gt;</span><span class="token number">8080</span>/tcp, :::8080-<span class="token operator">&gt;</span><span class="token number">8080</span>/tcp   objective_ganguly
e7eaa980f992   portainer/portainer   <span class="token string">&quot;/portainer&quot;</span>        <span class="token number">10</span> hours ago     Up <span class="token number">10</span> hours     <span class="token number">0.0</span>.0.0:8088-<span class="token operator">&gt;</span><span class="token number">9000</span>/tcp, :::8088-<span class="token operator">&gt;</span><span class="token number">9000</span>/tcp   naughty_galois
<span class="token comment">############ commit成镜像</span>
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ ~<span class="token punctuation">]</span><span class="token comment"># docker commit -a=&quot;hao&quot; -m=&quot;add webapps app&quot; 9d971489dd66 tomcat02:1.0</span>
<span class="token comment">############</span>
sha256:db6145d646d58a414415199fd3e006d0cb6f34c7621aad53a0db772a1f821514
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ ~<span class="token punctuation">]</span><span class="token comment"># docker images</span>
REPOSITORY            TAG       IMAGE ID       CREATED         SIZE
tomcat02              <span class="token number">1.0</span>       db6145d646d5   <span class="token number">7</span> seconds ago   684MB
nginx                 latest    605c77e624dd   <span class="token number">2</span> months ago    141MB
tomcat                <span class="token number">9.0</span>       b8e65a4d736d   <span class="token number">2</span> months ago    680MB
tomcat                latest    fb5657adc892   <span class="token number">2</span> months ago    680MB
hello-world           latest    feb5d9fea6a5   <span class="token number">5</span> months ago    <span class="token number">13</span>.3kB
centos                latest    5d0da3dc9764   <span class="token number">5</span> months ago    231MB
portainer/portainer   latest    580c0e4e98b0   <span class="token number">12</span> months ago   <span class="token number">79</span>.1MB

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><img src="/assets/img/image-20220314105406645.png"> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>如果想保存当前容器状态，使用commit保存为镜像
就好比学VM时的快照
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h1 id="容器数据卷"><a href="#容器数据卷" class="header-anchor">#</a> 容器数据卷</h1> <p>docker理念：将应用和环境打包成一个镜像！</p> <p>数据？如果数据都在容器中，那我们容器删除，数据就会丢失！</p> <p>MySQL,容器删了，删库跑路咯~</p> <p>容器之间可以有一个数据共享的技术！Docker容器产生的数据，可以同步到本地！</p> <p>这就是卷技术！目录挂载，将我们的容器内的目录，挂载到Linux上面！
<img src="/assets/img/image-20220314110344291.png"></p> <p><strong>总结：容器的持久化和同步操作，容器之间也可以数据共享</strong></p> <h2 id="使用数据卷"><a href="#使用数据卷" class="header-anchor">#</a> 使用数据卷</h2> <blockquote><p>方法一： -v</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run -it -v 主机目录，容器内目录

<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ /<span class="token punctuation">]</span><span class="token comment"># docker run -it -v /home/ceshi:/home centos /bin/bash</span>
<span class="token comment">#再开一个窗口，使用inspect查看信息</span>
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ home<span class="token punctuation">]</span><span class="token comment"># docker inspect a4bcc6e82076</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><img src="/assets/img/image-20220314111257555.png"> <p>在容器里创建
<img src="/assets/img/image-20220314111715129.png"></p> <p>在linux主机上查看映射的目录
<img src="/assets/img/image-20220314111744916.png"></p> <blockquote><p>主机上更改也会传到容器内！双向绑定！</p></blockquote> <ol><li>关闭容器</li> <li>在主机内创建文件并修改
<img src="/assets/img/image-20220314112147916.png"></li></ol> <p>内容是 hello,linux update</p> <p>​	2.再次启动之前的容器并查看内容</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#获取容器id</span>
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ /<span class="token punctuation">]</span><span class="token comment"># docker ps -a</span>
CONTAINER ID   IMAGE                 COMMAND                  CREATED          STATUS                            PORTS                                       NAMES
a4bcc6e82076   centos                <span class="token string">&quot;/bin/bash&quot;</span>              <span class="token number">11</span> minutes ago   Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> About a minute ago                                                 vigilant_elbakyan
9d971489dd66   tomcat                <span class="token string">&quot;catalina.sh run&quot;</span>        <span class="token number">58</span> minutes ago   Exited <span class="token punctuation">(</span><span class="token number">130</span><span class="token punctuation">)</span> About a minute ago                                               objective_ganguly
e7eaa980f992   portainer/portainer   <span class="token string">&quot;/portainer&quot;</span>             <span class="token number">11</span> hours ago     Up <span class="token number">11</span> hours                       <span class="token number">0.0</span>.0.0:8088-<span class="token operator">&gt;</span><span class="token number">9000</span>/tcp, :::8088-<span class="token operator">&gt;</span><span class="token number">9000</span>/tcp   naughty_galois
cdaf8f453fbb   portainer/portainer   <span class="token string">&quot;/portainer&quot;</span>             <span class="token number">11</span> hours ago     Exited <span class="token punctuation">(</span><span class="token number">137</span><span class="token punctuation">)</span> <span class="token number">11</span> hours ago                                                     cool_pascal
f904c7bc312b   f29a1ee41030          <span class="token string">&quot;/usr/local/bin/dock…&quot;</span>   <span class="token number">11</span> hours ago     Created                                                                       elasticsearch
bcda56cb7974   tomcat                <span class="token string">&quot;catalina.sh run&quot;</span>        <span class="token number">14</span> hours ago     Exited <span class="token punctuation">(</span><span class="token number">137</span><span class="token punctuation">)</span> <span class="token number">58</span> minutes ago                                                   tomcat01
d8ac68ea2da3   nginx                 <span class="token string">&quot;/docker-entrypoint.…&quot;</span>   <span class="token number">14</span> hours ago     Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">14</span> hours ago                                                       nginx01
261bb1145d2e   centos                <span class="token string">&quot;/bin/bash&quot;</span>              <span class="token number">16</span> hours ago     Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">16</span> hours ago                                                       focused_colden
eaf8ee96f004   centos                <span class="token string">&quot;/bin/bash&quot;</span>              <span class="token number">16</span> hours ago     Exited <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token number">16</span> hours ago                                                       busy_lamport
d367ea67c454   centos                <span class="token string">&quot;/bin/bash&quot;</span>              <span class="token number">17</span> hours ago     Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">16</span> hours ago                                                       keen_kilby
8bc7ec4dcb78   centos                <span class="token string">&quot;/bin/bash&quot;</span>              <span class="token number">17</span> hours ago     Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">17</span> hours ago                                                       intelligent_dijkstra
8f347ada525a   hello-world           <span class="token string">&quot;/hello&quot;</span>                 <span class="token number">18</span> hours ago     Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">18</span> hours ago                                                       happy_faraday
<span class="token comment">#启动容器</span>
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ /<span class="token punctuation">]</span><span class="token comment"># docker start a4bcc6e82076</span>
a4bcc6e82076
<span class="token comment">#进入容器</span>
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ /<span class="token punctuation">]</span><span class="token comment"># docker attach a4bcc6e82076</span>
<span class="token punctuation">[</span>root@a4bcc6e82076 /<span class="token punctuation">]</span><span class="token comment"># cd /home/</span>
<span class="token punctuation">[</span>root@a4bcc6e82076 home<span class="token punctuation">]</span><span class="token comment"># ls</span>
shujujuan.java
<span class="token comment">#查看内容</span>
<span class="token punctuation">[</span>root@a4bcc6e82076 home<span class="token punctuation">]</span><span class="token comment"># cat shujujuan.java </span>
hello,linux update
<span class="token punctuation">[</span>root@a4bcc6e82076 home<span class="token punctuation">]</span><span class="token comment"># </span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="实战-安装mysql"><a href="#实战-安装mysql" class="header-anchor">#</a> 实战：安装MySQL</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#获取镜像</span>
<span class="token function">docker</span> pull mysql:8.0.23
<span class="token comment">#启动mysql</span>
-d 后台运行
-p 端口映射
-v 卷挂载
-e 环境配置  -e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span>root 设置初始密码为root
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ /<span class="token punctuation">]</span><span class="token comment"># docker run -d -p 3310:3306 -v /home/mysql/conf:/etc/mysql/conf.d -v /home/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=root --name mysql01 mysql:8.0.23</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="测试连接-出现问题"><a href="#测试连接-出现问题" class="header-anchor">#</a> 测试连接：（出现问题！）</h3> <p>问题：开启阿里云公网访问端口3310后报这个错
<img src="/assets/img/image-20220314114631074.png"></p> <p>解决：</p> <p>参考网址：https://blog.csdn.net/Alalafan/article/details/81358551</p> <p>解决过程：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#查询mysql的容器ID</span>
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ /<span class="token punctuation">]</span><span class="token comment"># docker ps</span>
CONTAINER ID   IMAGE          COMMAND                  CREATED         STATUS         PORTS                                                  NAMES
2ed9912a481c   mysql:8.0.23   <span class="token string">&quot;docker-entrypoint.s…&quot;</span>   <span class="token number">9</span> minutes ago   Up <span class="token number">9</span> minutes   <span class="token number">33060</span>/tcp, <span class="token number">0.0</span>.0.0:3310-<span class="token operator">&gt;</span><span class="token number">3306</span>/tcp, :::3310-<span class="token operator">&gt;</span><span class="token number">3306</span>/tcp   mysql01
<span class="token comment">#进入容器</span>
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ /<span class="token punctuation">]</span><span class="token comment"># docker exec -it 2ed9912a481c bash</span>
<span class="token comment">#进入mysql</span>
root@2ed9912a481c:/<span class="token comment"># mysql --user=root --passsword</span>
mysql: <span class="token punctuation">[</span>ERROR<span class="token punctuation">]</span> unknown option <span class="token string">'--passsword'</span><span class="token builtin class-name">.</span>
root@2ed9912a481c:/<span class="token comment"># mysql --user=root --password</span>
Enter password: 
Welcome to the MySQL monitor.  Commands end with <span class="token punctuation">;</span> or <span class="token punctuation">\</span>g.
Your MySQL connection <span class="token function">id</span> is <span class="token number">11</span>
Server version: <span class="token number">8.0</span>.23 MySQL Community Server - GPL

Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token number">2000</span>, <span class="token number">2021</span>, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type <span class="token string">'help;'</span> or <span class="token string">'\h'</span> <span class="token keyword">for</span> help. Type <span class="token string">'\c'</span> to <span class="token function">clear</span> the current input statement.
<span class="token comment">#输入命令：ALTER  USER  'root'  IDENTIFIED  WITH  mysql_native_password  BY 'root'</span>
<span class="token comment">#此处 'root'是密码</span>
mysql<span class="token operator">&gt;</span> ALTER  <span class="token environment constant">USER</span>  <span class="token string">'root'</span>  IDENTIFIED  WITH  mysql_native_password  BY <span class="token string">'root'</span><span class="token punctuation">;</span>
Query OK, <span class="token number">0</span> rows affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> 

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>然后连接成功！
<img src="/assets/img/image-20220314114818669.png"></p> <p><strong>检查数据卷</strong> <img src="/assets/img/image-20220314115227178.png"></p> <p>即使我们删除了容器，但linux主机里的数据库数据是不会丢失的</p> <h3 id="具名和匿名挂载"><a href="#具名和匿名挂载" class="header-anchor">#</a> 具名和匿名挂载</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#匿名挂载</span>
-v 容器内路径
<span class="token function">docker</span> run -d -P --name nginx01 -v /etc/nginx nginx

<span class="token comment">#</span>
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ /<span class="token punctuation">]</span><span class="token comment"># docker volume ls</span>
DRIVER    VOLUME NAME
<span class="token builtin class-name">local</span>     0eed2b9a20bc6f563ba48fc3c3232bd9d7e880b95d35606210a7d6fda99e9d61
<span class="token builtin class-name">local</span>     5966a314e9efb870a167e90efed05a46a88eb605631bfbe16b529ff4b9013d4c
<span class="token builtin class-name">local</span>     997655acb92b36d6bfc52fda25cbeddbd26fa40320bd4c10d16775de874cc171

<span class="token comment">#这就是匿名挂载（-v时只写了容器内的路径没写容器外的路径）</span>

<span class="token comment">#具名挂载</span>
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ ~<span class="token punctuation">]</span><span class="token comment"># docker run -d -P --name nginx02 -v juming-nginx:/etc/nginx nginx</span>
de9c2d68f40a17d1f7e03bc9715ee712311a035f58c63bf44c82e1adc22cd9ba
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ ~<span class="token punctuation">]</span><span class="token comment"># docker volume ls</span>
DRIVER    VOLUME NAME
<span class="token builtin class-name">local</span>     0eed2b9a20bc6f563ba48fc3c3232bd9d7e880b95d35606210a7d6fda99e9d61
<span class="token builtin class-name">local</span>     5966a314e9efb870a167e90efed05a46a88eb605631bfbe16b529ff4b9013d4c
<span class="token builtin class-name">local</span>     997655acb92b36d6bfc52fda25cbeddbd26fa40320bd4c10d16775de874cc171
<span class="token builtin class-name">local</span>     juming-nginx 				<span class="token comment">#可以通过volume查找到他，这就是具名挂载</span>
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ ~<span class="token punctuation">]</span><span class="token comment"># </span>
<span class="token comment">#查看下这个卷</span>
<span class="token function">docker</span> volume inspect juming-nginx

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><img src="/assets/img/image-20220314225234189.png"> <p>所有的docker容器内的卷，没有指定目录的情况下都是挂载到</p> <p><strong>/var/lib/docker/volumes/xxxx/_data</strong></p> <p>通过具名挂载我们可以很方便的找到卷，大多数情况下使用 <strong>具名挂载</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#区分是具名挂载还是匿名挂载 还是指定路径挂载</span>
-v 容器内路径 		<span class="token comment">#匿名挂载</span>
-v 卷名：容器内路径	  <span class="token comment">#具名挂载</span>
-v /宿主机路径：：容器内路径 <span class="token comment">#指定路径挂载</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>扩展：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#通过-v 容器内路径</span>
<span class="token comment">#ro 只读，这个路径只可以从外部(宿主机)改变不可以从内部（容器）改变</span>
<span class="token comment">#rw 可读可写，默认为rw</span>
<span class="token function">docker</span> run -d -P --name nginx02 -v juming-nginx:/etc/nginx:ro nginx
<span class="token function">docker</span> run -d -P --name nginx02 -v juming-nginx:/etc/nginx:rw nginx

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h1 id="dockerfile"><a href="#dockerfile" class="header-anchor">#</a> DockerFile</h1> <h2 id="dockerfile介绍"><a href="#dockerfile介绍" class="header-anchor">#</a> DockerFile介绍</h2> <p>dockerfile是用来构建docker镜像的文件！命令参数脚本！</p> <p>构建步骤：</p> <ol><li>编写一个dockerfile文件</li> <li>docker build构建成为一个镜像</li> <li>docker run 运行镜像</li> <li>docker push 发布镜像（DockerHub 阿里云镜像仓库）</li></ol> <h2 id="dockerfiel构建"><a href="#dockerfiel构建" class="header-anchor">#</a> DockerFiel构建</h2> <p>基础知识：</p> <ol><li>每个保留关键字（指令）都必须是大写字母</li> <li>执行从上到下</li> <li>#表示注释</li> <li>每个指令都会创建提交一个新的镜像层，并提交
<img src="/assets/img/image-20220315103651946.png"></li></ol> <p>dockerfile是面向开发的，我们以后要发布项目，做镜像、就需要编写dockerfile文件，这个文件十分简单</p> <p>,Docker逐渐成为企业交付的标准。</p> <p>DockerFile：构建文件，定义了一切步骤，源代码</p> <p>DockerImages：通过DockerFile构建生成的镜像，最终发布和运行的产品，</p> <p>Docker容器：容器就是则镜像运行起来提供服务的</p> <h2 id="dockerfile指令"><a href="#dockerfile指令" class="header-anchor">#</a> DockerFile指令</h2> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>FROM					<span class="token comment">#基础镜像</span>
MAINTAINER				<span class="token comment">#镜像是谁写的，姓名+邮箱</span>
RUN	 					<span class="token comment">#镜像构建的时候需要运行的命令</span>
ADD						<span class="token comment">#步骤，tomcat镜像，这个tomcat压缩包，添加一层一层的。</span>
WORKDIR					<span class="token comment">#镜像工作的目录</span>
VOLUME					<span class="token comment">#挂载的目录</span>
EXPOST					<span class="token comment">#暴露端口配置 同-p</span>
CMD						<span class="token comment">#指定这个容器启动的时候要运行的命令，只有最后一个要生效，可被替代</span>
ENTRYPOINT				<span class="token comment">#指定这个容器启动的时候要运行的命令，可以追加命令</span>
ONBUILD					<span class="token comment">#当构建一个被继承DockerFile这个时候就会运行ONBUILD指令</span>
COPY					<span class="token comment">#类似ADD，将文件拷贝到镜像中</span>
ENV						<span class="token comment">#构建的时候设置环境变量！</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><img src="/assets/img/image-20220315104159987.png"> <h2 id="实战测试"><a href="#实战测试" class="header-anchor">#</a> 实战测试</h2> <h3 id="centos镜像实战"><a href="#centos镜像实战" class="header-anchor">#</a> centos镜像实战</h3> <p>DockerHub中99%的镜像都是从这个基础镜像FROM scratch,然后配置需要的软件和配置和进行搭建。
<img src="/assets/img/image-20220315105401371.png"></p> <ol><li>编写DockerFile文件</li></ol> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#文件名为 mydockerfile-centos</span>
FROM centos:7  <span class="token comment">#此处指定版本为7，因为Linux主机版本为7，若不指定版本默认镜像为最新版8，版本不同会导致出错，这里引发了一个错误见下方</span>
MAINTAINER hao<span class="token operator">&lt;</span><span class="token number">1348114176</span>@qq.com<span class="token operator">&gt;</span>

ENV MYPATH /usr/local
WORKDIR <span class="token variable">$MYPATH</span>

RUN yum -y <span class="token function">install</span> <span class="token function">vim</span>
RUN yum -y <span class="token function">install</span> net-tools

EXPOSE <span class="token number">80</span>

CMD <span class="token builtin class-name">echo</span> <span class="token variable">$MYPATH</span>
CMD <span class="token builtin class-name">echo</span> <span class="token string">&quot;---end---&quot;</span>
CMD /bin/bash


<span class="token comment">#构建镜像</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>FROM centos 出错！！
<img src="/assets/img/image-20220315112147079.png"></p> <p>因为最新版本为centos8，centOS8于2021年12月31日停止了源的服务，而现在时间是2022年3月15日，所以之前的方法都不行的原因所在（本质是源的问题）。</p> <p>FROM centos:7 成功！！！
<img src="/assets/img/image-20220315112335211.png"></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#测试运行</span>
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ dockerfile<span class="token punctuation">]</span><span class="token comment"># docker images</span>
REPOSITORY            TAG       IMAGE ID       CREATED          SIZE
mycentos              <span class="token number">0.1</span>       2891257d1cde   <span class="token number">5</span> minutes ago    580MB
<span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>                <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>    f08f776e9668   <span class="token number">19</span> minutes ago   231MB
tomcat02              <span class="token number">1.0</span>       db6145d646d5   <span class="token number">25</span> hours ago     684MB
nginx                 latest    605c77e624dd   <span class="token number">2</span> months ago     141MB
tomcat                <span class="token number">9.0</span>       b8e65a4d736d   <span class="token number">2</span> months ago     680MB
tomcat                latest    fb5657adc892   <span class="token number">2</span> months ago     680MB
hello-world           latest    feb5d9fea6a5   <span class="token number">5</span> months ago     <span class="token number">13</span>.3kB
centos                <span class="token number">7</span>         eeb6ee3f44bd   <span class="token number">6</span> months ago     204MB
centos                latest    5d0da3dc9764   <span class="token number">6</span> months ago     231MB
mysql                 <span class="token number">8.0</span>.23    cbe8815cbea8   <span class="token number">11</span> months ago    546MB
portainer/portainer   latest    580c0e4e98b0   <span class="token number">12</span> months ago    <span class="token number">79</span>.1MB
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ dockerfile<span class="token punctuation">]</span><span class="token comment"># docker run -it mycentos:0.1</span>
<span class="token punctuation">[</span>root@0b2cd2633cab local<span class="token punctuation">]</span><span class="token comment"># pwd </span>
/usr/local <span class="token comment">#之前WORKDIR设定的目录</span>
<span class="token comment">#测试ifconfig，默认的镜像构建的容器是没有ifconfig和vim功能的，我们构建自己的镜像时是安装了的</span>
<span class="token punctuation">[</span>root@0b2cd2633cab local<span class="token punctuation">]</span><span class="token comment"># ifconfig</span>
eth0: <span class="token assign-left variable">flags</span><span class="token operator">=</span><span class="token number">416</span><span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>UP,BROADCAST,RUNNING,MULTICAST<span class="token operator">&gt;</span>  mtu <span class="token number">1500</span>
        inet <span class="token number">172.17</span>.0.3  netmask <span class="token number">255.255</span>.0.0  broadcast <span class="token number">172.17</span>.255.255
        ether 02:42:ac:11:00:03  txqueuelen <span class="token number">0</span>  <span class="token punctuation">(</span>Ethernet<span class="token punctuation">)</span>
        RX packets <span class="token number">8</span>  bytes <span class="token number">656</span> <span class="token punctuation">(</span><span class="token number">656.0</span> B<span class="token punctuation">)</span>
        RX errors <span class="token number">0</span>  dropped <span class="token number">0</span>  overruns <span class="token number">0</span>  frame <span class="token number">0</span>
        TX packets <span class="token number">0</span>  bytes <span class="token number">0</span> <span class="token punctuation">(</span><span class="token number">0.0</span> B<span class="token punctuation">)</span>
        TX errors <span class="token number">0</span>  dropped <span class="token number">0</span> overruns <span class="token number">0</span>  carrier <span class="token number">0</span>  collisions <span class="token number">0</span>

lo: <span class="token assign-left variable">flags</span><span class="token operator">=</span><span class="token number">7</span><span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>UP,LOOPBACK,RUNNING<span class="token operator">&gt;</span>  mtu <span class="token number">65536</span>
        inet <span class="token number">127.0</span>.0.1  netmask <span class="token number">255.0</span>.0.0
        loop  txqueuelen <span class="token number">1000</span>  <span class="token punctuation">(</span>Local Loopback<span class="token punctuation">)</span>
        RX packets <span class="token number">0</span>  bytes <span class="token number">0</span> <span class="token punctuation">(</span><span class="token number">0.0</span> B<span class="token punctuation">)</span>
        RX errors <span class="token number">0</span>  dropped <span class="token number">0</span>  overruns <span class="token number">0</span>  frame <span class="token number">0</span>
        TX packets <span class="token number">0</span>  bytes <span class="token number">0</span> <span class="token punctuation">(</span><span class="token number">0.0</span> B<span class="token punctuation">)</span>
        TX errors <span class="token number">0</span>  dropped <span class="token number">0</span> overruns <span class="token number">0</span>  carrier <span class="token number">0</span>  collisions <span class="token number">0</span>

<span class="token punctuation">[</span>root@0b2cd2633cab local<span class="token punctuation">]</span><span class="token comment"># vim test</span>
<span class="token comment">#运行成功1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><img src="/assets/img/image-20220315113037436.png"> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#docker history 镜像ID     输出镜像搭建过程</span>
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ ~<span class="token punctuation">]</span><span class="token comment"># docker history 2891257d1cde</span>
IMAGE          CREATED          CREATED BY                                      SIZE      COMMENT
2891257d1cde   <span class="token number">13</span> minutes ago   /bin/sh -c <span class="token comment">#(nop)  CMD [&quot;/bin/sh&quot; &quot;-c&quot; &quot;/bin…   0B        </span>
8272ba9441a8   <span class="token number">13</span> minutes ago   /bin/sh -c <span class="token comment">#(nop)  CMD [&quot;/bin/sh&quot; &quot;-c&quot; &quot;echo…   0B        </span>
24584037dba9   <span class="token number">13</span> minutes ago   /bin/sh -c <span class="token comment">#(nop)  CMD [&quot;/bin/sh&quot; &quot;-c&quot; &quot;echo…   0B        </span>
871186befa3d   <span class="token number">13</span> minutes ago   /bin/sh -c <span class="token comment">#(nop)  EXPOSE 80                    0B        </span>
13f432ce7268   <span class="token number">13</span> minutes ago   /bin/sh -c yum -y <span class="token function">install</span> net-tools             161MB     
bd88f9a2f5f1   <span class="token number">13</span> minutes ago   /bin/sh -c yum -y <span class="token function">install</span> <span class="token function">vim</span>                   216MB     
6ad6fbf6191f   <span class="token number">13</span> minutes ago   /bin/sh -c <span class="token comment">#(nop) WORKDIR /usr/local            0B        </span>
5856a352f808   <span class="token number">13</span> minutes ago   /bin/sh -c <span class="token comment">#(nop)  ENV MYPATH=/usr/local        0B        </span>
24d720c02af1   <span class="token number">13</span> minutes ago   /bin/sh -c <span class="token comment">#(nop)  MAINTAINER hao&lt;1348114176…   0B        </span>
eeb6ee3f44bd   <span class="token number">6</span> months ago     /bin/sh -c <span class="token comment">#(nop)  CMD [&quot;/bin/bash&quot;]            0B        </span>
<span class="token operator">&lt;</span>missing<span class="token operator">&gt;</span>      <span class="token number">6</span> months ago     /bin/sh -c <span class="token comment">#(nop)  LABEL org.label-schema.sc…   0B        </span>
<span class="token operator">&lt;</span>missing<span class="token operator">&gt;</span>      <span class="token number">6</span> months ago     /bin/sh -c <span class="token comment">#(nop) ADD file:b3ebbe8bd304723d4…   204MB     </span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="cmd和entrypoint的区别"><a href="#cmd和entrypoint的区别" class="header-anchor">#</a> CMD和ENTRYPOINT的区别</h4> <blockquote><p>CMD和ENTRYPOINT的区别</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>CMD						<span class="token comment">#指定这个容器启动的时候要运行的命令，只有最后一个要生效，可被替代</span>
ENTRYPOINT				<span class="token comment">#指定这个容器启动的时候要运行的命令，可以追加命令</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>CMD测试</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#编写dockerfile文件</span>
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ dockerfile<span class="token punctuation">]</span><span class="token comment"># vim dockerfile-cmd-test</span>
<span class="token comment">#文件内容</span>
FROM centos:7
CMD <span class="token punctuation">[</span><span class="token string">&quot;ls&quot;</span>,<span class="token string">&quot;-a&quot;</span><span class="token punctuation">]</span>


<span class="token comment">#注意最后的点必须加，表示当前目录，不然报错</span>
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ dockerfile<span class="token punctuation">]</span><span class="token comment"># docker build -f dockerfile-cmd-test -t cmdtest .</span>
Sending build context to Docker daemon  <span class="token number">3</span>.072kB
Step <span class="token number">1</span>/2 <span class="token builtin class-name">:</span> FROM centos:7
 ---<span class="token operator">&gt;</span> eeb6ee3f44bd
Step <span class="token number">2</span>/2 <span class="token builtin class-name">:</span> CMD <span class="token punctuation">[</span><span class="token string">&quot;ls&quot;</span>,<span class="token string">&quot;-a&quot;</span><span class="token punctuation">]</span>
 ---<span class="token operator">&gt;</span> Running <span class="token keyword">in</span> 4f4eaf35086b
Removing intermediate container 4f4eaf35086b
 ---<span class="token operator">&gt;</span> 274d4c241ffa
Successfully built 274d4c241ffa
Successfully tagged cmdtest:latest

<span class="token comment">#run测试</span>
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ dockerfile<span class="token punctuation">]</span><span class="token comment"># docker run 274d4c241ffa</span>
<span class="token builtin class-name">.</span>
<span class="token punctuation">..</span>
.dockerenv
anaconda-post.log
bin
dev
etc
home
lib
lib64
media
mnt
opt
proc
root
run
sbin
srv
sys
tmp
usr
var
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ dockerfile<span class="token punctuation">]</span><span class="token comment"># cat dockerfile-cmd-test </span>
FROM centos:7
CMD <span class="token punctuation">[</span><span class="token string">&quot;ls&quot;</span>,<span class="token string">&quot;-a&quot;</span><span class="token punctuation">]</span>

<span class="token comment">#想追加一个命令 -l</span>
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ dockerfile<span class="token punctuation">]</span><span class="token comment"># docker run 274d4c241ffa -l</span>
docker: Error response from daemon: failed to create shim: OCI runtime create failed: container_linux.go:380: starting container process caused: exec: <span class="token string">&quot;-l&quot;</span><span class="token builtin class-name">:</span> executable <span class="token function">file</span> not found <span class="token keyword">in</span> <span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span> unknown.

<span class="token comment">#cmd的情况下 -l 替换了[&quot;ls&quot;,&quot;-a&quot;]命令，-l不是命令所以报错</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><p><strong>ENTRYPOINT</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ dockerfile<span class="token punctuation">]</span><span class="token comment"># vim dockerfile-cmd-entrypoint</span>

<span class="token comment">#文件内容为</span>
FROM centos:7
ENTRYPOINT <span class="token punctuation">[</span><span class="token string">&quot;ls&quot;</span>,<span class="token string">&quot;-a&quot;</span><span class="token punctuation">]</span>

<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ dockerfile<span class="token punctuation">]</span><span class="token comment"># docker build -f dockerfile-cmd-entrypoint -t entorypoint-test .</span>
Sending build context to Docker daemon  <span class="token number">4</span>.096kB
Step <span class="token number">1</span>/2 <span class="token builtin class-name">:</span> FROM centos:7
 ---<span class="token operator">&gt;</span> eeb6ee3f44bd
Step <span class="token number">2</span>/2 <span class="token builtin class-name">:</span> ENTRYPOINT <span class="token punctuation">[</span><span class="token string">&quot;ls&quot;</span>,<span class="token string">&quot;-a&quot;</span><span class="token punctuation">]</span>
 ---<span class="token operator">&gt;</span> Running <span class="token keyword">in</span> 56c5e82f0898
Removing intermediate container 56c5e82f0898
 ---<span class="token operator">&gt;</span> 1eb6f0d21623
Successfully built 1eb6f0d21623
Successfully tagged entorypoint-test:latest
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ dockerfile<span class="token punctuation">]</span><span class="token comment"># docker run 1eb6f0d21623</span>
<span class="token builtin class-name">.</span>
<span class="token punctuation">..</span>
.dockerenv
anaconda-post.log
bin
dev
etc
home
lib
lib64
media
mnt
opt
proc
root
run
sbin
srv
sys
tmp
usr
var
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ dockerfile<span class="token punctuation">]</span><span class="token comment"># docker run 1eb6f0d21623 -l</span>
total <span class="token number">64</span>
drwxr-xr-x  <span class="token number">1</span> root root  <span class="token number">4096</span> Mar <span class="token number">15</span> <span class="token number">10</span>:55 <span class="token builtin class-name">.</span>
drwxr-xr-x  <span class="token number">1</span> root root  <span class="token number">4096</span> Mar <span class="token number">15</span> <span class="token number">10</span>:55 <span class="token punctuation">..</span>
-rwxr-xr-x  <span class="token number">1</span> root root     <span class="token number">0</span> Mar <span class="token number">15</span> <span class="token number">10</span>:55 .dockerenv
-rw-r--r--  <span class="token number">1</span> root root <span class="token number">12114</span> Nov <span class="token number">13</span>  <span class="token number">2020</span> anaconda-post.log
lrwxrwxrwx  <span class="token number">1</span> root root     <span class="token number">7</span> Nov <span class="token number">13</span>  <span class="token number">2020</span> bin -<span class="token operator">&gt;</span> usr/bin
drwxr-xr-x  <span class="token number">5</span> root root   <span class="token number">340</span> Mar <span class="token number">15</span> <span class="token number">10</span>:55 dev
drwxr-xr-x  <span class="token number">1</span> root root  <span class="token number">4096</span> Mar <span class="token number">15</span> <span class="token number">10</span>:55 etc
drwxr-xr-x  <span class="token number">2</span> root root  <span class="token number">4096</span> Apr <span class="token number">11</span>  <span class="token number">2018</span> home
lrwxrwxrwx  <span class="token number">1</span> root root     <span class="token number">7</span> Nov <span class="token number">13</span>  <span class="token number">2020</span> lib -<span class="token operator">&gt;</span> usr/lib
lrwxrwxrwx  <span class="token number">1</span> root root     <span class="token number">9</span> Nov <span class="token number">13</span>  <span class="token number">2020</span> lib64 -<span class="token operator">&gt;</span> usr/lib64
drwxr-xr-x  <span class="token number">2</span> root root  <span class="token number">4096</span> Apr <span class="token number">11</span>  <span class="token number">2018</span> media
drwxr-xr-x  <span class="token number">2</span> root root  <span class="token number">4096</span> Apr <span class="token number">11</span>  <span class="token number">2018</span> mnt
drwxr-xr-x  <span class="token number">2</span> root root  <span class="token number">4096</span> Apr <span class="token number">11</span>  <span class="token number">2018</span> opt
dr-xr-xr-x <span class="token number">94</span> root root     <span class="token number">0</span> Mar <span class="token number">15</span> <span class="token number">10</span>:55 proc
dr-xr-x---  <span class="token number">2</span> root root  <span class="token number">4096</span> Nov <span class="token number">13</span>  <span class="token number">2020</span> root
drwxr-xr-x <span class="token number">11</span> root root  <span class="token number">4096</span> Nov <span class="token number">13</span>  <span class="token number">2020</span> run
lrwxrwxrwx  <span class="token number">1</span> root root     <span class="token number">8</span> Nov <span class="token number">13</span>  <span class="token number">2020</span> sbin -<span class="token operator">&gt;</span> usr/sbin
drwxr-xr-x  <span class="token number">2</span> root root  <span class="token number">4096</span> Apr <span class="token number">11</span>  <span class="token number">2018</span> srv
dr-xr-xr-x <span class="token number">13</span> root root     <span class="token number">0</span> Mar <span class="token number">15</span> <span class="token number">10</span>:55 sys
drwxrwxrwt  <span class="token number">7</span> root root  <span class="token number">4096</span> Nov <span class="token number">13</span>  <span class="token number">2020</span> tmp
drwxr-xr-x <span class="token number">13</span> root root  <span class="token number">4096</span> Nov <span class="token number">13</span>  <span class="token number">2020</span> usr
drwxr-xr-x <span class="token number">18</span> root root  <span class="token number">4096</span> Nov <span class="token number">13</span>  <span class="token number">2020</span> var
<span class="token comment">#发现不同CMD的话 后面加上-l是报错的，但ENTRYPOINT是成功运行的，没有替换[&quot;ls&quot;,&quot;-a&quot;]是加在他们后面</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br></div></div><h3 id="tomcat镜像实战"><a href="#tomcat镜像实战" class="header-anchor">#</a> TomCat镜像实战</h3> <ol><li><p>准备镜像文件tomcat压缩包，jdk压缩包</p> <p>ps：目录为 /home/tomcat
<img src="/assets/img/image-20220315191118988.png"></p></li></ol> <p>​	2.建立 Dockerfile文件（统一命名，官方命名），build会自动寻找这个文件，不需要-f指定了</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>FROM centos:7
MAINTAINER hao<span class="token operator">&lt;</span><span class="token number">1348114176</span>@qq.com<span class="token operator">&gt;</span>

COPY readme.txt /usr/local/readme.txt

ADD jdk-8u321-linux-x64.tar.gz /usr/local/

ADD apache-tomcat-9.0.37.tar.gz /usr/local/

RUN yum -y <span class="token function">install</span> <span class="token function">vim</span>

ENV MYPATH /usr/local

WORKDIR <span class="token variable">$MYPATH</span>

ENV JAVA_HOME /usr/local/jdk1.8.0_321
ENV CLASSPATH <span class="token variable">$JAVA_HOME</span>/lib/dt.jar:<span class="token variable">$JAVA_HOME</span>/lib/tools.jar
ENV CATALINA_HOME /usr/local/apache-tomcat-9.0.37
ENV CATALINA_BASH /usr/local/apache-tomcat-9.0.37
ENV <span class="token environment constant">PATH</span> <span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$JAVA_HOME</span>/bin:<span class="token variable">$CATALINA_HOME</span>/lib:<span class="token variable">$CATALINA_HOM</span>/bin

EXPOSE <span class="token number">8080</span>

CMD /usr/local/apache-tomcat-9.0.37/bin/startup.sh <span class="token operator">&amp;&amp;</span> <span class="token function">tail</span> -F /url/local/apache-tomcat-9.0.37/bin/logs/catalina.out
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>​	3.构建镜像</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#docker build -t diytomcat .</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><img src="/assets/img/image-20220315195223385.png"> <p>…………
<img src="/assets/img/image-20220315195255547.png"></p> <p>docker images 检查镜像
<img src="/assets/img/image-20220315195324655.png"></p> <p>​	4.启动镜像</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ tomcat<span class="token punctuation">]</span><span class="token comment"># docker run -d -p 9090:8080 --name diytomcat -v /home/tomcat/test:/usr/local/apache-tomcat-9.0.37/webapps/test -v //home/tomcat/tomcatlogs/:/usr/local/apache-tomcat-9.0.37/logs diytomcat</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>​	5.进入容器检查（选做）</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ tomcat<span class="token punctuation">]</span><span class="token comment"># docker exec -it 41d97238bbef /bin/bash</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><img src="/assets/img/image-20220315195529854.png"> <p>6.访问</p> <p><strong>确保阿里云安全组有9090！</strong> <img src="/assets/img/image-20220315195620014.png"></p> <p>访问成功！</p> <p>然后在/home/tomcat/test/WEB-INF（主机挂载目录）</p> <p>创建web.xml</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&lt;</span>?xml <span class="token assign-left variable">version</span><span class="token operator">=</span><span class="token string">&quot;1.0&quot;</span> <span class="token assign-left variable">encoding</span><span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span>?<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>web-app <span class="token assign-left variable">xmlns</span><span class="token operator">=</span><span class="token string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span>
         xmlns:xsi<span class="token operator">=</span><span class="token string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
         xsi:schemaLocation<span class="token operator">=</span><span class="token string">&quot;http://xmlns.jcp.org/xml/ns/javaee
                         http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span>
         <span class="token assign-left variable">version</span><span class="token operator">=</span><span class="token string">&quot;4.0&quot;</span>
         metadata-complete<span class="token operator">=</span><span class="token string">&quot;true&quot;</span><span class="token operator">&gt;</span>


<span class="token operator">&lt;</span>/web-app<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>在他的上级目录也就是/home/tomcat/test</p> <p>创建index.jsp</p> <p>现在更改test目录下的index.jsp</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>Hello Hao<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
 &lt;% System.out.println(&quot;------my web logs--------&quot;); %&gt;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>然后访问公网：120.76.216.233:9090/test
<img src="/assets/img/image-20220315204850208.png"></p> <p>访问成功！</p> <h1 id="docker网络"><a href="#docker网络" class="header-anchor">#</a> Docker网络</h1> <h2 id="部署springboot微服务"><a href="#部署springboot微服务" class="header-anchor">#</a> 部署SpringBoot微服务</h2> <ol><li>新建一个SpringBoot项目</li> <li>打包项目
<img src="/assets/img/image-20220316092108040.png"></li></ol> <p>直到打包成功才行！</p> <p>打包成功后jar包在target里
<img src="/assets/img/image-20220316093351217.png"></p> <p>3.本地测试</p> <p>资源文件夹打开：
<img src="/assets/img/image-20220316093422945.png"></p> <p>在目录输入cmd后
<img src="/assets/img/image-20220316093447297.png"></p> <p>启动后能在本地访问成功： localhost：8080
<img src="/assets/img/image-20220316093515633.png"></p> <p><strong>这就说明jar包没有问题！</strong></p> <p>4.上传Linux</p> <p>编写Dockerfile</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>FROM java:8

COPY *.jar /app.jar

CMD <span class="token punctuation">[</span><span class="token string">&quot;--server.port=8080&quot;</span><span class="token punctuation">]</span>

EXPOSE <span class="token number">8080</span>

ENTRYPOINT <span class="token punctuation">[</span><span class="token string">&quot;java&quot;</span>,<span class="token string">&quot;-jar&quot;</span>,<span class="token string">&quot;/app.jar&quot;</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>将jar包和Dockerfile传到Linux
<img src="/assets/img/image-20220316094903932.png"></p> <p><strong>DockerBuild</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># -t 后不能接大写！</span>
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ idea<span class="token punctuation">]</span><span class="token comment"># docker build -t BSX .</span>
invalid argument <span class="token string">&quot;BSX&quot;</span> <span class="token keyword">for</span> <span class="token string">&quot;-t, --tag&quot;</span> flag: invalid reference format: repository name must be lowercase
See <span class="token string">'docker build --help'</span><span class="token builtin class-name">.</span>
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ idea<span class="token punctuation">]</span><span class="token comment"># docker build -t bsx .</span>
Sending build context to Docker daemon  <span class="token number">45</span>.55MB
Step <span class="token number">1</span>/5 <span class="token builtin class-name">:</span> FROM java:8
<span class="token number">8</span>: Pulling from library/java
5040bd298390: Pull complete 
fce5728aad85: Pull complete 
76610ec20bf5: Pull complete 
60170fec2151: Pull complete 
e98f73de8f0d: Pull complete 
11f7af24ed9c: Pull complete 
49e2d6393f32: Pull complete 
bb9cdec9c7f3: Pull complete 
Digest: sha256:c1ff613e8ba25833d2e1940da0940c3824f03f802c449f3d1815a66b7f8c0e9d
Status: Downloaded newer image <span class="token keyword">for</span> java:8
 ---<span class="token operator">&gt;</span> d23bdf5b1b1b
Step <span class="token number">2</span>/5 <span class="token builtin class-name">:</span> COPY *.jar /app.jar
 ---<span class="token operator">&gt;</span> 1adc653324ce
Step <span class="token number">3</span>/5 <span class="token builtin class-name">:</span> CMD <span class="token punctuation">[</span><span class="token string">&quot;--server.port=8080&quot;</span><span class="token punctuation">]</span>
 ---<span class="token operator">&gt;</span> Running <span class="token keyword">in</span> 842c8b238db1
Removing intermediate container 842c8b238db1
 ---<span class="token operator">&gt;</span> b1fe0983847d
Step <span class="token number">4</span>/5 <span class="token builtin class-name">:</span> EXPOSE <span class="token number">8080</span>
 ---<span class="token operator">&gt;</span> Running <span class="token keyword">in</span> 5382739949f6
Removing intermediate container 5382739949f6
 ---<span class="token operator">&gt;</span> a86f92f4a3ee
Step <span class="token number">5</span>/5 <span class="token builtin class-name">:</span> ENTRYPOINT <span class="token punctuation">[</span><span class="token string">&quot;java&quot;</span>,<span class="token string">&quot;-jar&quot;</span>,<span class="token string">&quot;/app.jar&quot;</span><span class="token punctuation">]</span>
 ---<span class="token operator">&gt;</span> Running <span class="token keyword">in</span> f9edd95498e2
Removing intermediate container f9edd95498e2
 ---<span class="token operator">&gt;</span> 04eb9d067806
Successfully built 04eb9d067806
Successfully tagged bsx:latest
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ idea<span class="token punctuation">]</span><span class="token comment"># clear</span>
<span class="token comment">#确认镜像已创建</span>
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ idea<span class="token punctuation">]</span><span class="token comment"># docker images</span>
REPOSITORY            TAG       IMAGE ID       CREATED         SIZE
bsx                   latest    04eb9d067806   <span class="token number">7</span> seconds ago   689MB
diytomcat             latest    3afd77cd8311   <span class="token number">14</span> hours ago    800MB
entorypoint-test      latest    1eb6f0d21623   <span class="token number">15</span> hours ago    204MB
cmdtest               latest    274d4c241ffa   <span class="token number">15</span> hours ago    204MB
mycentos              <span class="token number">0.1</span>       2891257d1cde   <span class="token number">22</span> hours ago    580MB
tomcat02              <span class="token number">1.0</span>       db6145d646d5   <span class="token number">47</span> hours ago    684MB
nginx                 latest    605c77e624dd   <span class="token number">2</span> months ago    141MB
tomcat                <span class="token number">9.0</span>       b8e65a4d736d   <span class="token number">2</span> months ago    680MB
tomcat                latest    fb5657adc892   <span class="token number">2</span> months ago    680MB
hello-world           latest    feb5d9fea6a5   <span class="token number">5</span> months ago    <span class="token number">13</span>.3kB
centos                <span class="token number">7</span>         eeb6ee3f44bd   <span class="token number">6</span> months ago    204MB
centos                latest    5d0da3dc9764   <span class="token number">6</span> months ago    231MB
mysql                 <span class="token number">8.0</span>.23    cbe8815cbea8   <span class="token number">11</span> months ago   546MB
portainer/portainer   latest    580c0e4e98b0   <span class="token number">12</span> months ago   <span class="token number">79</span>.1MB
java                  <span class="token number">8</span>         d23bdf5b1b1b   <span class="token number">5</span> years ago     643MB
<span class="token punctuation">[</span>root@iZwz969hnvixoyx8d2dmbvZ idea<span class="token punctuation">]</span><span class="token comment"># docker run -d -p 8080:8080 --name bsx02 bsx</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br></div></div><p>连接MySQL</p> <p>1.安装Mysql</p> <p>参考本文档
<img src="/assets/img/image-20220316152209893.png"></p> <p>只要能用navicat连通就说明没问题了。</p> <p><strong>但重点是！！！</strong></p> <p>打包的Jar包里，mysql连接配置
<img src="/assets/img/image-20220316152345105.png"></p> <p>账号密码必须是与docker里的mysql账号密码相同，其次</p> <p>localhost应该改成公网ip地址，端口3310是启动mysql时mysql的对外映射端口。
<img src="/assets/img/image-20220316152517736.png"></p></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">10/12/2022, 3:04:52 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/blogs/后端/SpringMVC.html" class="prev">
            SpringMVC
          </a></span> <span class="next"><a href="/blogs/后端/Java基础知识.html">
            Java基础知识
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-cb1513f6><li class="level-2" data-v-cb1513f6><a href="/blogs/%E5%90%8E%E7%AB%AF/Docker.html#docker能干嘛" class="sidebar-link reco-side-docker能干嘛" data-v-cb1513f6>Docker能干嘛</a></li><li class="level-2" data-v-cb1513f6><a href="/blogs/%E5%90%8E%E7%AB%AF/Docker.html#docker名词" class="sidebar-link reco-side-docker名词" data-v-cb1513f6>Docker名词</a></li><li class="level-2" data-v-cb1513f6><a href="/blogs/%E5%90%8E%E7%AB%AF/Docker.html#安装docker" class="sidebar-link reco-side-安装docker" data-v-cb1513f6>安装Docker</a></li><li class="level-2" data-v-cb1513f6><a href="/blogs/%E5%90%8E%E7%AB%AF/Docker.html#阿里云镜像加速" class="sidebar-link reco-side-阿里云镜像加速" data-v-cb1513f6>阿里云镜像加速</a></li><li class="level-2" data-v-cb1513f6><a href="/blogs/%E5%90%8E%E7%AB%AF/Docker.html#helloworld运行原理" class="sidebar-link reco-side-helloworld运行原理" data-v-cb1513f6>HelloWorld运行原理</a></li><li class="level-2" data-v-cb1513f6><a href="/blogs/%E5%90%8E%E7%AB%AF/Docker.html#底层原理" class="sidebar-link reco-side-底层原理" data-v-cb1513f6>底层原理</a></li><li class="level-2" data-v-cb1513f6><a href="/blogs/%E5%90%8E%E7%AB%AF/Docker.html#帮助命令" class="sidebar-link reco-side-帮助命令" data-v-cb1513f6>帮助命令</a></li><li class="level-2" data-v-cb1513f6><a href="/blogs/%E5%90%8E%E7%AB%AF/Docker.html#镜像命令" class="sidebar-link reco-side-镜像命令" data-v-cb1513f6>镜像命令</a></li><li class="level-2" data-v-cb1513f6><a href="/blogs/%E5%90%8E%E7%AB%AF/Docker.html#容器命令" class="sidebar-link reco-side-容器命令" data-v-cb1513f6>容器命令</a></li><li class="level-2" data-v-cb1513f6><a href="/blogs/%E5%90%8E%E7%AB%AF/Docker.html#其他常用命令" class="sidebar-link reco-side-其他常用命令" data-v-cb1513f6>其他常用命令</a></li><li class="level-2" data-v-cb1513f6><a href="/blogs/%E5%90%8E%E7%AB%AF/Docker.html#练习" class="sidebar-link reco-side-练习" data-v-cb1513f6>练习</a></li><li class="level-3" data-v-cb1513f6><a href="/blogs/%E5%90%8E%E7%AB%AF/Docker.html#小练习1-nginx" class="sidebar-link reco-side-小练习1-nginx" data-v-cb1513f6>小练习1：Nginx</a></li><li class="level-3" data-v-cb1513f6><a href="/blogs/%E5%90%8E%E7%AB%AF/Docker.html#小练习2-tomcat" class="sidebar-link reco-side-小练习2-tomcat" data-v-cb1513f6>小练习2：TomCat</a></li><li class="level-3" data-v-cb1513f6><a href="/blogs/%E5%90%8E%E7%AB%AF/Docker.html#小练习3-es-kibana" class="sidebar-link reco-side-小练习3-es-kibana" data-v-cb1513f6>小练习3：es+kibana</a></li><li class="level-2" data-v-cb1513f6><a href="/blogs/%E5%90%8E%E7%AB%AF/Docker.html#可视化工具" class="sidebar-link reco-side-可视化工具" data-v-cb1513f6>可视化工具</a></li><li class="level-2" data-v-cb1513f6><a href="/blogs/%E5%90%8E%E7%AB%AF/Docker.html#镜像是什么" class="sidebar-link reco-side-镜像是什么" data-v-cb1513f6>镜像是什么？</a></li><li class="level-2" data-v-cb1513f6><a href="/blogs/%E5%90%8E%E7%AB%AF/Docker.html#镜像加载原理" class="sidebar-link reco-side-镜像加载原理" data-v-cb1513f6>镜像加载原理</a></li><li class="level-2" data-v-cb1513f6><a href="/blogs/%E5%90%8E%E7%AB%AF/Docker.html#commit镜像" class="sidebar-link reco-side-commit镜像" data-v-cb1513f6>commit镜像</a></li><li class="level-2" data-v-cb1513f6><a href="/blogs/%E5%90%8E%E7%AB%AF/Docker.html#使用数据卷" class="sidebar-link reco-side-使用数据卷" data-v-cb1513f6>使用数据卷</a></li><li class="level-3" data-v-cb1513f6><a href="/blogs/%E5%90%8E%E7%AB%AF/Docker.html#实战-安装mysql" class="sidebar-link reco-side-实战-安装mysql" data-v-cb1513f6>实战：安装MySQL</a></li><li class="level-3" data-v-cb1513f6><a href="/blogs/%E5%90%8E%E7%AB%AF/Docker.html#测试连接-出现问题" class="sidebar-link reco-side-测试连接-出现问题" data-v-cb1513f6>测试连接：（出现问题！）</a></li><li class="level-3" data-v-cb1513f6><a href="/blogs/%E5%90%8E%E7%AB%AF/Docker.html#具名和匿名挂载" class="sidebar-link reco-side-具名和匿名挂载" data-v-cb1513f6>具名和匿名挂载</a></li><li class="level-2" data-v-cb1513f6><a href="/blogs/%E5%90%8E%E7%AB%AF/Docker.html#dockerfile介绍" class="sidebar-link reco-side-dockerfile介绍" data-v-cb1513f6>DockerFile介绍</a></li><li class="level-2" data-v-cb1513f6><a href="/blogs/%E5%90%8E%E7%AB%AF/Docker.html#dockerfiel构建" class="sidebar-link reco-side-dockerfiel构建" data-v-cb1513f6>DockerFiel构建</a></li><li class="level-2" data-v-cb1513f6><a href="/blogs/%E5%90%8E%E7%AB%AF/Docker.html#dockerfile指令" class="sidebar-link reco-side-dockerfile指令" data-v-cb1513f6>DockerFile指令</a></li><li class="level-2" data-v-cb1513f6><a href="/blogs/%E5%90%8E%E7%AB%AF/Docker.html#实战测试" class="sidebar-link reco-side-实战测试" data-v-cb1513f6>实战测试</a></li><li class="level-3" data-v-cb1513f6><a href="/blogs/%E5%90%8E%E7%AB%AF/Docker.html#centos镜像实战" class="sidebar-link reco-side-centos镜像实战" data-v-cb1513f6>centos镜像实战</a></li><li class="level-3" data-v-cb1513f6><a href="/blogs/%E5%90%8E%E7%AB%AF/Docker.html#tomcat镜像实战" class="sidebar-link reco-side-tomcat镜像实战" data-v-cb1513f6>TomCat镜像实战</a></li><li class="level-2" data-v-cb1513f6><a href="/blogs/%E5%90%8E%E7%AB%AF/Docker.html#部署springboot微服务" class="sidebar-link reco-side-部署springboot微服务" data-v-cb1513f6>部署SpringBoot微服务</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><APlayer audio="" fixed="true" theme="#b7daff" loop="loop" order="list" preload="auto" volume="0.7" mutex="true" lrc-type="3" list-max-height="250" storage-name="vuepress-plugin-meting" id="aplayer-fixed"></APlayer><div id="goTop" class="hide-cat" data-v-bf92849a></div><canvas id="vuepress-canvas-cursor"></canvas><div class="kanbanniang" data-v-5775ee02><div class="banniang-container" style="display:;" data-v-5775ee02><div class="messageBox" style="right:68px;bottom:190px;display:none;" data-v-5775ee02>
      欢迎来到这个没人管的站点嗷~~
    </div> <div class="operation" style="right:90px;bottom:40px;display:none;" data-v-5775ee02><i class="kbnfont kbn-ban-home ban-home" data-v-5775ee02></i> <i class="kbnfont kbn-ban-message message" data-v-5775ee02></i> <i class="kbnfont kbn-ban-close close" data-v-5775ee02></i> <a target="_blank" href="https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html" data-v-5775ee02><i class="kbnfont kbn-ban-info info" data-v-5775ee02></i></a> <i class="kbnfont kbn-ban-theme skin" style="display:;" data-v-5775ee02></i></div> <canvas id="banniang" width="150" height="220" class="live2d" style="right:90px;bottom:-20px;opacity:0.9;" data-v-5775ee02></canvas></div> <div class="showBanNiang" style="display:none;" data-v-5775ee02>
    看板娘
  </div></div><!----><div></div></div></div>
    <script src="/assets/js/app.cb73b030.js" defer></script><script src="/assets/js/3.23e2a2eb.js" defer></script><script src="/assets/js/1.76ab856a.js" defer></script><script src="/assets/js/17.eb1b2c45.js" defer></script><script src="/assets/js/9.1dc60e99.js" defer></script>
  </body>
</html>
